{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cbarb\\\\OneDrive\\\\Escritorio\\\\Cursor\\\\artesjac-test2\\\\artesjac-test2\\\\src\\\\pages\\\\ShopPage.js\",\n  _s = $RefreshSig$();\n// src/pages/ShopPage.js\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"../styles/shop.css\";\nimport { ShopAPI } from \"../api/shop.service\";\nimport { resolveImgUrl } from \"../utils/resolveImgUrl\";\nimport noImage from \"../assets/images/noimage.png\";\n\n// ---- Helpers ----\n\n// 1) Primera imagen válida\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firstImg = p => {\n  const candidate = Array.isArray(p === null || p === void 0 ? void 0 : p.images) && p.images.length ? p.images.find(Boolean) : (p === null || p === void 0 ? void 0 : p.image) || (p === null || p === void 0 ? void 0 : p.img) || (p === null || p === void 0 ? void 0 : p.thumbnail) || null;\n  return candidate ? String(candidate).replace(/\\\\/g, \"/\") : null;\n};\n\n// 2) Normalizar categoría que viene del backend (en inglés)\nconst normalizeCategory = cat => {\n  const c = String(cat || \"\").toLowerCase();\n  const map = {\n    jewelery: \"joyeria\",\n    jewelry: \"joyeria\",\n    art: \"pintura\",\n    paintings: \"pintura\",\n    ceramics: \"ceramica\",\n    ceramic: \"ceramica\",\n    textiles: \"textil\",\n    textile: \"textil\",\n    decoration: \"decoracion\",\n    decor: \"decoracion\",\n    bags: \"bolsos\",\n    bag: \"bolsos\",\n    wood: \"escultura\",\n    // si luego querés 'madera', cambiá aquí y en el sidebar\n    sculpture: \"escultura\",\n    esculturas: \"escultura\"\n  };\n  return map[c] || c || \"otros\";\n};\n\n// 3) Etiqueta bonita para mostrar en UI (es-CR)\nconst categoryLabel = id => {\n  const map = {\n    todos: \"Todos los productos\",\n    textil: \"Textil\",\n    joyeria: \"Joyería\",\n    pintura: \"Pintura\",\n    ceramica: \"Cerámica\",\n    escultura: \"Escultura\",\n    bolsos: \"Bolsos\",\n    decoracion: \"Decoración\",\n    otros: \"Otros\"\n  };\n  return map[id] || (id ? id[0].toUpperCase() + id.slice(1) : \"Otros\");\n};\n\n// 4) Emoji por categoría (cosmético)\nconst categoryIcon = id => {\n  const map = {\n    textil: \"🧵\",\n    joyeria: \"💎\",\n    pintura: \"🎨\",\n    ceramica: \"🏺\",\n    escultura: \"🗿\",\n    bolsos: \"👜\",\n    decoracion: \"🖼️\",\n    otros: \"🪄\"\n  };\n  return map[id] || \"🎨\";\n};\n\n// 5) Formatear CRC\nconst fmtCRC = n => typeof n === \"number\" ? `₡${n.toLocaleString(\"es-CR\")}` : String(n || \"\");\n\n// 6) Obtener precio numérico para el carrito, venga como venga\nconst getNumericPrice = p => {\n  if (typeof (p === null || p === void 0 ? void 0 : p.numericPrice) === \"number\") return p.numericPrice;\n  if (typeof (p === null || p === void 0 ? void 0 : p.price) === \"number\") return p.price;\n  if (typeof (p === null || p === void 0 ? void 0 : p.price) === \"string\") {\n    // \"₡12.000\" -> 12000\n    const digits = p.price.replace(/[^\\d]/g, \"\");\n    return Number(digits || 0);\n  }\n  return 0;\n};\n\n// ---- Mock de respaldo si la API falla (mantengo tus textos) ----\nconst mockProducts = [{\n  id: 1,\n  name: \"Collar artesanal de semillas\",\n  price: \"₡12.000\",\n  numericPrice: 12000,\n  category: \"joyeria\",\n  description: \"Hermoso collar hecho con semillas naturales costarricenses\"\n}, {\n  id: 2,\n  name: \"Bolso tejido a mano\",\n  price: \"₡18.500\",\n  numericPrice: 18500,\n  category: \"textil\",\n  description: \"Bolso tradicional tejido por artesanas locales\"\n}, {\n  id: 3,\n  name: \"Cuadro colorido abstracto\",\n  price: \"₡22.000\",\n  numericPrice: 22000,\n  category: \"pintura\",\n  description: \"Pintura original inspirada en la naturaleza de Costa Rica\"\n}, {\n  id: 4,\n  name: \"Vasija de cerámica tradicional\",\n  price: \"₡15.800\",\n  numericPrice: 15800,\n  category: \"ceramica\",\n  description: \"Vasija elaborada con técnicas ancestrales de alfarería\"\n}, {\n  id: 5,\n  name: \"Aretes de madera tallada\",\n  price: \"₡8.500\",\n  numericPrice: 8500,\n  category: \"joyeria\",\n  description: \"Aretes únicos tallados en madera de guanacaste\"\n}, {\n  id: 6,\n  name: \"Manteles bordados\",\n  price: \"₡25.000\",\n  numericPrice: 25000,\n  category: \"textil\",\n  description: \"Manteles con bordados tradicionales hechos a mano\"\n}, {\n  id: 7,\n  name: \"Escultura de madera\",\n  price: \"₡35.000\",\n  numericPrice: 35000,\n  category: \"escultura\",\n  description: \"Escultura artística tallada en madera preciosa\"\n}, {\n  id: 8,\n  name: \"Pulsera de semillas naturales\",\n  price: \"₡6.500\",\n  numericPrice: 6500,\n  category: \"joyeria\",\n  description: \"Pulsera delicada hecha con semillas del bosque tropical\"\n}, {\n  id: 9,\n  name: \"Cojines decorativos\",\n  price: \"₡14.000\",\n  numericPrice: 14000,\n  category: \"textil\",\n  description: \"Cojines con diseños típicos costarricenses\"\n}, {\n  id: 10,\n  name: \"Tazas de cerámica artesanal\",\n  price: \"₡9.800\",\n  numericPrice: 9800,\n  category: \"ceramica\",\n  description: \"Set de tazas únicas hechas en torno de alfarero\"\n}, {\n  id: 11,\n  name: \"Cuadro paisaje costarricense\",\n  price: \"₡28.000\",\n  numericPrice: 28000,\n  category: \"pintura\",\n  description: \"Paisaje inspirado en los volcanes de Costa Rica\"\n}, {\n  id: 12,\n  name: \"Canasta tejida tradicional\",\n  price: \"₡16.500\",\n  numericPrice: 16500,\n  category: \"textil\",\n  description: \"Canasta funcional tejida con fibras naturales\"\n}];\nexport const ShopPage = () => {\n  _s();\n  // Estado\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"todos\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [cartItems, setCartItems] = useState([]);\n  const [addingToCart, setAddingToCart] = useState(null);\n  const [error, setError] = useState(\"\");\n\n  // Cargar carrito al iniciar\n  useEffect(() => {\n    try {\n      const savedCart = localStorage.getItem(\"artesjac-cart\");\n      if (savedCart && savedCart !== \"null\" && savedCart !== \"[]\") {\n        setCartItems(JSON.parse(savedCart));\n      }\n    } catch (e) {\n      console.error(\"Error al cargar carrito:\", e);\n    }\n  }, []);\n\n  // Cargar productos desde backend (fallback a mock si falla)\n  useEffect(() => {\n    (async () => {\n      setError(\"\");\n      try {\n        var _res$data;\n        const res = await ShopAPI.list({\n          limit: 200\n        });\n        const list = Array.isArray(res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data) ? res.data.data : [];\n        // Mapeo: normalizo categoría y defino campos de compatibilidad\n        const normalized = list.map(p => ({\n          ...p,\n          _normalizedCategory: normalizeCategory(p.category),\n          _displayName: p.title || p.name || \"Producto\",\n          _displayPrice: fmtCRC(typeof p.price === \"number\" ? p.price : p.price)\n        }));\n        setProducts(normalized);\n      } catch (e) {\n        console.error(e);\n        setError(\"No se pudieron cargar los productos. Mostrando datos de ejemplo.\");\n        // Mock: también normalizo para que filtros funcionen\n        const normalizedMock = mockProducts.map(p => ({\n          ...p,\n          _normalizedCategory: normalizeCategory(p.category),\n          _displayName: p.name,\n          _displayPrice: p.price\n        }));\n        setProducts(normalizedMock);\n      }\n    })();\n  }, []);\n\n  // Filtrar por categoría y búsqueda\n  useEffect(() => {\n    let list = products;\n    if (selectedCategory !== \"todos\") {\n      list = list.filter(p => p._normalizedCategory === selectedCategory);\n    }\n    if (searchTerm) {\n      const s = searchTerm.toLowerCase();\n      list = list.filter(p => {\n        const name = (p._displayName || \"\").toLowerCase();\n        const desc = (p.description || \"\").toLowerCase();\n        return name.includes(s) || desc.includes(s);\n      });\n    }\n    setFilteredProducts(list);\n  }, [selectedCategory, searchTerm, products]);\n\n  // Conteo de categorías dinamico\n  const categories = useMemo(() => {\n    const counts = {\n      textil: 0,\n      joyeria: 0,\n      pintura: 0,\n      ceramica: 0,\n      escultura: 0,\n      bolsos: 0,\n      decoracion: 0,\n      otros: 0\n    };\n    products.forEach(p => {\n      const key = p._normalizedCategory || \"otros\";\n      if (counts[key] !== undefined) counts[key] += 1;else counts.otros += 1;\n    });\n    const base = [\"todos\", \"textil\", \"joyeria\", \"pintura\", \"ceramica\", \"escultura\", \"bolsos\", \"decoracion\", \"otros\"];\n    return base.map(id => ({\n      id,\n      name: categoryLabel(id),\n      count: id === \"todos\" ? products.length : counts[id],\n      icon: categoryIcon(id)\n    }));\n  }, [products]);\n\n  // Imagen final o fallback\n  const getImgSrc = p => {\n    const candidate = firstImg(p);\n    if (!candidate) return noImage;\n    try {\n      return resolveImgUrl(candidate) || noImage;\n    } catch {\n      return noImage;\n    }\n  };\n\n  // Agregar al carrito (compatibilidad con mock y API)\n  const addToCart = async product => {\n    // ID de carrito: _id o id o slug\n    const itemId = product._id || product.id || product.slug;\n    setAddingToCart(itemId);\n    try {\n      const savedCart = localStorage.getItem(\"artesjac-cart\");\n      let currentCart = savedCart && savedCart !== \"null\" ? JSON.parse(savedCart) : [];\n      const idx = currentCart.findIndex(it => it.id === itemId);\n      if (idx > -1) {\n        currentCart[idx].quantity = (currentCart[idx].quantity || 1) + 1;\n      } else {\n        currentCart.push({\n          id: itemId,\n          productId: itemId,\n          slug: product.slug,\n          name: product._displayName,\n          // para UIs previas\n          title: product._displayName,\n          quantity: 1,\n          image: firstImg(product),\n          category: product._normalizedCategory,\n          numericPrice: getNumericPrice(product),\n          price: product.price\n        });\n      }\n      localStorage.setItem(\"artesjac-cart\", JSON.stringify(currentCart));\n      setCartItems(currentCart);\n\n      // Notificación\n      await new Promise(r => setTimeout(r, 500));\n      const notification = document.createElement(\"div\");\n      notification.style.cssText = `\n        position: fixed; top: 20px; right: 20px;\n        background: linear-gradient(135deg, #4caf50, #45a049);\n        color: white; padding: 1rem 1.5rem; border-radius: 8px;\n        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n        z-index: 1000; font-weight: bold; animation: slideIn 0.3s ease;\n      `;\n      notification.innerHTML = `✅ ${product._displayName} agregado al carrito!`;\n      document.body.appendChild(notification);\n      setTimeout(() => notification.remove(), 3000);\n    } catch (error) {\n      console.error(\"Error al agregar al carrito:\", error);\n      alert(\"Error al agregar el producto al carrito\");\n    } finally {\n      setAddingToCart(null);\n    }\n  };\n\n  // Totales del carrito\n  const calculateCartTotal = () => cartItems.reduce((total, item) => total + item.numericPrice * item.quantity, 0);\n  const getTotalCartItems = () => cartItems.reduce((total, item) => total + item.quantity, 0);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"shop-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shop-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Tienda ArtesJAC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Descubre arte aut\\xE9ntico costarricense hecho a mano por talentosos artesanos locales\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-indicator\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-indicator-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-shopping-cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [getTotalCartItems(), \" producto\", getTotalCartItems() !== 1 ? \"s\" : \"\", \" en el carrito -\", \" \", \"Total: \", fmtCRC(calculateCartTotal())]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/cart\",\n        className: \"view-cart-btn\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 21\n        }, this), \" Ver Carrito\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shop-search\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\uD83D\\uDD0D Buscar productos, categor\\xEDas...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shop-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"shop-sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCC2 Categor\\xEDas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category-filters\",\n          children: categories.map(c => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `category-btn ${selectedCategory === c.id ? \"active\" : \"\"}`,\n            onClick: () => setSelectedCategory(c.id),\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginRight: \"0.5rem\"\n              },\n              children: c.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 33\n            }, this), c.name, \" (\", c.count, \")\"]\n          }, c.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"products-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"products-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: selectedCategory === \"todos\" ? \"🎨 Todos los productos\" : `${categoryIcon(selectedCategory)} ${categoryLabel(selectedCategory)}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"products-count\",\n            children: [filteredProducts.length, \" productos\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          style: {\n            marginBottom: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-exclamation-triangle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"products-grid\",\n          children: filteredProducts.map(p => {\n            // Clave estable\n            const key = p.slug || p._id || p.id;\n            // Href: preferimos slug; si no hay (mock), usamos id\n            const href = p.slug ? `/p/${p.slug}` : `/product/${p.id}`;\n            // Nombre y precio display\n            const name = p._displayName;\n            const price = fmtCRC(typeof p.price === \"number\" ? p.price : p.price);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-media\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: getImgSrc(p),\n                  alt: `Imagen de ${name}`,\n                  className: \"product-thumb\",\n                  loading: \"lazy\",\n                  decoding: \"async\",\n                  referrerPolicy: \"no-referrer\",\n                  crossOrigin: \"anonymous\",\n                  onError: e => {\n                    if (e.currentTarget.dataset.fallback === \"1\") return;\n                    e.currentTarget.dataset.fallback = \"1\";\n                    e.currentTarget.src = noImage;\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"product-name\",\n                  children: name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"product-price\",\n                  children: price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"product-category\",\n                  children: [categoryIcon(p._normalizedCategory), \" \", categoryLabel(p._normalizedCategory)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-add-to-cart\",\n                  onClick: () => addToCart(p),\n                  disabled: addingToCart === (p._id || p.id || p.slug),\n                  children: addingToCart === (p._id || p.id || p.slug) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fa fa-spinner fa-spin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 396,\n                      columnNumber: 53\n                    }, this), \"Agregando...\"]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fa fa-shopping-cart\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 53\n                    }, this), \"Agregar al carrito\"]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: href,\n                  className: \"btn-view-details\",\n                  style: {\n                    textDecoration: \"none\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-eye\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 45\n                  }, this), \"Ver detalles\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 37\n              }, this)]\n            }, key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 21\n        }, this), filteredProducts.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-products\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-search\",\n            style: {\n              fontSize: \"3rem\",\n              color: \"#666\",\n              marginBottom: \"1rem\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"No se encontraron productos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: searchTerm ? `No hay productos que coincidan con \"${searchTerm}\"` : \"No hay productos en esta categoría\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Intenta cambiar los filtros o el t\\xE9rmino de b\\xFAsqueda\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        @keyframes slideIn {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 9\n  }, this);\n};\n_s(ShopPage, \"vVnuSn5OwLUplTlAh85hSTPHYU8=\");\n_c = ShopPage;\nvar _c;\n$RefreshReg$(_c, \"ShopPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Link","ShopAPI","resolveImgUrl","noImage","jsxDEV","_jsxDEV","Fragment","_Fragment","firstImg","p","candidate","Array","isArray","images","length","find","Boolean","image","img","thumbnail","String","replace","normalizeCategory","cat","c","toLowerCase","map","jewelery","jewelry","art","paintings","ceramics","ceramic","textiles","textile","decoration","decor","bags","bag","wood","sculpture","esculturas","categoryLabel","id","todos","textil","joyeria","pintura","ceramica","escultura","bolsos","decoracion","otros","toUpperCase","slice","categoryIcon","fmtCRC","n","toLocaleString","getNumericPrice","numericPrice","price","digits","Number","mockProducts","name","category","description","ShopPage","_s","products","setProducts","filteredProducts","setFilteredProducts","selectedCategory","setSelectedCategory","searchTerm","setSearchTerm","cartItems","setCartItems","addingToCart","setAddingToCart","error","setError","savedCart","localStorage","getItem","JSON","parse","e","console","_res$data","res","list","limit","data","normalized","_normalizedCategory","_displayName","title","_displayPrice","normalizedMock","filter","s","desc","includes","categories","counts","forEach","key","undefined","base","count","icon","getImgSrc","addToCart","product","itemId","_id","slug","currentCart","idx","findIndex","it","quantity","push","productId","setItem","stringify","Promise","r","setTimeout","notification","document","createElement","style","cssText","innerHTML","body","appendChild","remove","alert","calculateCartTotal","reduce","total","item","getTotalCartItems","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","type","placeholder","value","onChange","target","onClick","marginRight","marginBottom","href","src","alt","loading","decoding","referrerPolicy","crossOrigin","onError","currentTarget","dataset","fallback","disabled","textDecoration","fontSize","color","jsx","_c","$RefreshReg$"],"sources":["C:/Users/cbarb/OneDrive/Escritorio/Cursor/artesjac-test2/artesjac-test2/src/pages/ShopPage.js"],"sourcesContent":["// src/pages/ShopPage.js\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../styles/shop.css\";\r\nimport { ShopAPI } from \"../api/shop.service\";\r\nimport { resolveImgUrl } from \"../utils/resolveImgUrl\";\r\nimport noImage from \"../assets/images/noimage.png\";\r\n\r\n// ---- Helpers ----\r\n\r\n// 1) Primera imagen válida\r\nconst firstImg = (p) => {\r\n    const candidate = Array.isArray(p?.images) && p.images.length\r\n        ? p.images.find(Boolean)\r\n        : p?.image || p?.img || p?.thumbnail || null;\r\n    return candidate ? String(candidate).replace(/\\\\/g, \"/\") : null;\r\n};\r\n\r\n// 2) Normalizar categoría que viene del backend (en inglés)\r\nconst normalizeCategory = (cat) => {\r\n    const c = String(cat || \"\").toLowerCase();\r\n    const map = {\r\n        jewelery: \"joyeria\",\r\n        jewelry: \"joyeria\",\r\n        art: \"pintura\",\r\n        paintings: \"pintura\",\r\n        ceramics: \"ceramica\",\r\n        ceramic: \"ceramica\",\r\n        textiles: \"textil\",\r\n        textile: \"textil\",\r\n        decoration: \"decoracion\",\r\n        decor: \"decoracion\",\r\n        bags: \"bolsos\",\r\n        bag: \"bolsos\",\r\n        wood: \"escultura\",       // si luego querés 'madera', cambiá aquí y en el sidebar\r\n        sculpture: \"escultura\",\r\n        esculturas: \"escultura\",\r\n    };\r\n    return map[c] || c || \"otros\";\r\n};\r\n\r\n// 3) Etiqueta bonita para mostrar en UI (es-CR)\r\nconst categoryLabel = (id) => {\r\n    const map = {\r\n        todos: \"Todos los productos\",\r\n        textil: \"Textil\",\r\n        joyeria: \"Joyería\",\r\n        pintura: \"Pintura\",\r\n        ceramica: \"Cerámica\",\r\n        escultura: \"Escultura\",\r\n        bolsos: \"Bolsos\",\r\n        decoracion: \"Decoración\",\r\n        otros: \"Otros\",\r\n    };\r\n    return map[id] || (id ? id[0].toUpperCase() + id.slice(1) : \"Otros\");\r\n};\r\n\r\n// 4) Emoji por categoría (cosmético)\r\nconst categoryIcon = (id) => {\r\n    const map = {\r\n        textil: \"🧵\",\r\n        joyeria: \"💎\",\r\n        pintura: \"🎨\",\r\n        ceramica: \"🏺\",\r\n        escultura: \"🗿\",\r\n        bolsos: \"👜\",\r\n        decoracion: \"🖼️\",\r\n        otros: \"🪄\",\r\n    };\r\n    return map[id] || \"🎨\";\r\n};\r\n\r\n// 5) Formatear CRC\r\nconst fmtCRC = (n) =>\r\n    typeof n === \"number\" ? `₡${n.toLocaleString(\"es-CR\")}` : String(n || \"\");\r\n\r\n// 6) Obtener precio numérico para el carrito, venga como venga\r\nconst getNumericPrice = (p) => {\r\n    if (typeof p?.numericPrice === \"number\") return p.numericPrice;\r\n    if (typeof p?.price === \"number\") return p.price;\r\n    if (typeof p?.price === \"string\") {\r\n        // \"₡12.000\" -> 12000\r\n        const digits = p.price.replace(/[^\\d]/g, \"\");\r\n        return Number(digits || 0);\r\n    }\r\n    return 0;\r\n};\r\n\r\n// ---- Mock de respaldo si la API falla (mantengo tus textos) ----\r\nconst mockProducts = [\r\n    { id: 1, name: \"Collar artesanal de semillas\", price: \"₡12.000\", numericPrice: 12000, category: \"joyeria\", description: \"Hermoso collar hecho con semillas naturales costarricenses\" },\r\n    { id: 2, name: \"Bolso tejido a mano\", price: \"₡18.500\", numericPrice: 18500, category: \"textil\", description: \"Bolso tradicional tejido por artesanas locales\" },\r\n    { id: 3, name: \"Cuadro colorido abstracto\", price: \"₡22.000\", numericPrice: 22000, category: \"pintura\", description: \"Pintura original inspirada en la naturaleza de Costa Rica\" },\r\n    { id: 4, name: \"Vasija de cerámica tradicional\", price: \"₡15.800\", numericPrice: 15800, category: \"ceramica\", description: \"Vasija elaborada con técnicas ancestrales de alfarería\" },\r\n    { id: 5, name: \"Aretes de madera tallada\", price: \"₡8.500\", numericPrice: 8500, category: \"joyeria\", description: \"Aretes únicos tallados en madera de guanacaste\" },\r\n    { id: 6, name: \"Manteles bordados\", price: \"₡25.000\", numericPrice: 25000, category: \"textil\", description: \"Manteles con bordados tradicionales hechos a mano\" },\r\n    { id: 7, name: \"Escultura de madera\", price: \"₡35.000\", numericPrice: 35000, category: \"escultura\", description: \"Escultura artística tallada en madera preciosa\" },\r\n    { id: 8, name: \"Pulsera de semillas naturales\", price: \"₡6.500\", numericPrice: 6500, category: \"joyeria\", description: \"Pulsera delicada hecha con semillas del bosque tropical\" },\r\n    { id: 9, name: \"Cojines decorativos\", price: \"₡14.000\", numericPrice: 14000, category: \"textil\", description: \"Cojines con diseños típicos costarricenses\" },\r\n    { id: 10, name: \"Tazas de cerámica artesanal\", price: \"₡9.800\", numericPrice: 9800, category: \"ceramica\", description: \"Set de tazas únicas hechas en torno de alfarero\" },\r\n    { id: 11, name: \"Cuadro paisaje costarricense\", price: \"₡28.000\", numericPrice: 28000, category: \"pintura\", description: \"Paisaje inspirado en los volcanes de Costa Rica\" },\r\n    { id: 12, name: \"Canasta tejida tradicional\", price: \"₡16.500\", numericPrice: 16500, category: \"textil\", description: \"Canasta funcional tejida con fibras naturales\" },\r\n];\r\n\r\nexport const ShopPage = () => {\r\n    // Estado\r\n    const [products, setProducts] = useState([]);\r\n    const [filteredProducts, setFilteredProducts] = useState([]);\r\n    const [selectedCategory, setSelectedCategory] = useState(\"todos\");\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [cartItems, setCartItems] = useState([]);\r\n    const [addingToCart, setAddingToCart] = useState(null);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    // Cargar carrito al iniciar\r\n    useEffect(() => {\r\n        try {\r\n            const savedCart = localStorage.getItem(\"artesjac-cart\");\r\n            if (savedCart && savedCart !== \"null\" && savedCart !== \"[]\") {\r\n                setCartItems(JSON.parse(savedCart));\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Error al cargar carrito:\", e);\r\n        }\r\n    }, []);\r\n\r\n    // Cargar productos desde backend (fallback a mock si falla)\r\n    useEffect(() => {\r\n        (async () => {\r\n            setError(\"\");\r\n            try {\r\n                const res = await ShopAPI.list({ limit: 200 });\r\n                const list = Array.isArray(res?.data?.data) ? res.data.data : [];\r\n                // Mapeo: normalizo categoría y defino campos de compatibilidad\r\n                const normalized = list.map((p) => ({\r\n                    ...p,\r\n                    _normalizedCategory: normalizeCategory(p.category),\r\n                    _displayName: p.title || p.name || \"Producto\",\r\n                    _displayPrice: fmtCRC(typeof p.price === \"number\" ? p.price : p.price),\r\n                }));\r\n                setProducts(normalized);\r\n            } catch (e) {\r\n                console.error(e);\r\n                setError(\"No se pudieron cargar los productos. Mostrando datos de ejemplo.\");\r\n                // Mock: también normalizo para que filtros funcionen\r\n                const normalizedMock = mockProducts.map((p) => ({\r\n                    ...p,\r\n                    _normalizedCategory: normalizeCategory(p.category),\r\n                    _displayName: p.name,\r\n                    _displayPrice: p.price,\r\n                }));\r\n                setProducts(normalizedMock);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    // Filtrar por categoría y búsqueda\r\n    useEffect(() => {\r\n        let list = products;\r\n\r\n        if (selectedCategory !== \"todos\") {\r\n            list = list.filter((p) => p._normalizedCategory === selectedCategory);\r\n        }\r\n\r\n        if (searchTerm) {\r\n            const s = searchTerm.toLowerCase();\r\n            list = list.filter((p) => {\r\n                const name = (p._displayName || \"\").toLowerCase();\r\n                const desc = (p.description || \"\").toLowerCase();\r\n                return name.includes(s) || desc.includes(s);\r\n            });\r\n        }\r\n\r\n        setFilteredProducts(list);\r\n    }, [selectedCategory, searchTerm, products]);\r\n\r\n    // Conteo de categorías dinamico\r\n    const categories = useMemo(() => {\r\n        const counts = {\r\n            textil: 0,\r\n            joyeria: 0,\r\n            pintura: 0,\r\n            ceramica: 0,\r\n            escultura: 0,\r\n            bolsos: 0,\r\n            decoracion: 0,\r\n            otros: 0,\r\n        };\r\n        products.forEach((p) => {\r\n            const key = p._normalizedCategory || \"otros\";\r\n            if (counts[key] !== undefined) counts[key] += 1;\r\n            else counts.otros += 1;\r\n        });\r\n        const base = [\r\n            \"todos\",\r\n            \"textil\",\r\n            \"joyeria\",\r\n            \"pintura\",\r\n            \"ceramica\",\r\n            \"escultura\",\r\n            \"bolsos\",\r\n            \"decoracion\",\r\n            \"otros\",\r\n        ];\r\n        return base.map((id) => ({\r\n            id,\r\n            name: categoryLabel(id),\r\n            count: id === \"todos\" ? products.length : counts[id],\r\n            icon: categoryIcon(id),\r\n        }));\r\n    }, [products]);\r\n\r\n    // Imagen final o fallback\r\n    const getImgSrc = (p) => {\r\n        const candidate = firstImg(p);\r\n        if (!candidate) return noImage;\r\n        try {\r\n            return resolveImgUrl(candidate) || noImage;\r\n        } catch {\r\n            return noImage;\r\n        }\r\n    };\r\n\r\n    // Agregar al carrito (compatibilidad con mock y API)\r\n    const addToCart = async (product) => {\r\n        // ID de carrito: _id o id o slug\r\n        const itemId = product._id || product.id || product.slug;\r\n        setAddingToCart(itemId);\r\n\r\n        try {\r\n            const savedCart = localStorage.getItem(\"artesjac-cart\");\r\n            let currentCart = savedCart && savedCart !== \"null\" ? JSON.parse(savedCart) : [];\r\n\r\n            const idx = currentCart.findIndex((it) => it.id === itemId);\r\n            if (idx > -1) {\r\n                currentCart[idx].quantity = (currentCart[idx].quantity || 1) + 1;\r\n            } else {\r\n                currentCart.push({\r\n                    id: itemId,\r\n                    productId: itemId,\r\n                    slug: product.slug,\r\n                    name: product._displayName, // para UIs previas\r\n                    title: product._displayName,\r\n                    quantity: 1,\r\n                    image: firstImg(product),\r\n                    category: product._normalizedCategory,\r\n                    numericPrice: getNumericPrice(product),\r\n                    price: product.price,\r\n                });\r\n            }\r\n\r\n            localStorage.setItem(\"artesjac-cart\", JSON.stringify(currentCart));\r\n            setCartItems(currentCart);\r\n\r\n            // Notificación\r\n            await new Promise((r) => setTimeout(r, 500));\r\n            const notification = document.createElement(\"div\");\r\n            notification.style.cssText = `\r\n        position: fixed; top: 20px; right: 20px;\r\n        background: linear-gradient(135deg, #4caf50, #45a049);\r\n        color: white; padding: 1rem 1.5rem; border-radius: 8px;\r\n        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\r\n        z-index: 1000; font-weight: bold; animation: slideIn 0.3s ease;\r\n      `;\r\n            notification.innerHTML = `✅ ${product._displayName} agregado al carrito!`;\r\n            document.body.appendChild(notification);\r\n            setTimeout(() => notification.remove(), 3000);\r\n        } catch (error) {\r\n            console.error(\"Error al agregar al carrito:\", error);\r\n            alert(\"Error al agregar el producto al carrito\");\r\n        } finally {\r\n            setAddingToCart(null);\r\n        }\r\n    };\r\n\r\n    // Totales del carrito\r\n    const calculateCartTotal = () =>\r\n        cartItems.reduce((total, item) => total + (item.numericPrice * item.quantity), 0);\r\n\r\n    const getTotalCartItems = () =>\r\n        cartItems.reduce((total, item) => total + item.quantity, 0);\r\n\r\n    return (\r\n        <main className=\"shop-container\">\r\n            {/* Header */}\r\n            <div className=\"shop-header\">\r\n                <h1>Tienda ArtesJAC</h1>\r\n                <p>Descubre arte auténtico costarricense hecho a mano por talentosos artesanos locales</p>\r\n            </div>\r\n\r\n            {/* Indicador carrito */}\r\n            <div className=\"cart-indicator\">\r\n                <div className=\"cart-indicator-info\">\r\n                    <i className=\"fa fa-shopping-cart\"></i>\r\n                    <span>\r\n                        {getTotalCartItems()} producto{getTotalCartItems() !== 1 ? \"s\" : \"\"} en el carrito -{\" \"}\r\n                        Total: {fmtCRC(calculateCartTotal())}\r\n                    </span>\r\n                </div>\r\n                <Link to=\"/cart\" className=\"view-cart-btn\">\r\n                    <i className=\"fa fa-arrow-right\"></i> Ver Carrito\r\n                </Link>\r\n            </div>\r\n\r\n            {/* Buscador */}\r\n            <div className=\"shop-search\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"🔍 Buscar productos, categorías...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"shop-content\">\r\n                {/* Sidebar categorías */}\r\n                <aside className=\"shop-sidebar\">\r\n                    <h3>📂 Categorías</h3>\r\n                    <div className=\"category-filters\">\r\n                        {categories.map((c) => (\r\n                            <button\r\n                                key={c.id}\r\n                                className={`category-btn ${selectedCategory === c.id ? \"active\" : \"\"}`}\r\n                                onClick={() => setSelectedCategory(c.id)}\r\n                            >\r\n                                <span style={{ marginRight: \"0.5rem\" }}>{c.icon}</span>\r\n                                {c.name} ({c.count})\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </aside>\r\n\r\n                {/* Grid de productos */}\r\n                <section className=\"products-section\">\r\n                    <div className=\"products-header\">\r\n                        <h2>\r\n                            {selectedCategory === \"todos\"\r\n                                ? \"🎨 Todos los productos\"\r\n                                : `${categoryIcon(selectedCategory)} ${categoryLabel(selectedCategory)}`}\r\n                        </h2>\r\n                        <span className=\"products-count\">{filteredProducts.length} productos</span>\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div className=\"error-message\" style={{ marginBottom: 16 }}>\r\n                            <i className=\"fa fa-exclamation-triangle\"></i>\r\n                            <span>{error}</span>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"products-grid\">\r\n                        {filteredProducts.map((p) => {\r\n                            // Clave estable\r\n                            const key = p.slug || p._id || p.id;\r\n                            // Href: preferimos slug; si no hay (mock), usamos id\r\n                            const href = p.slug ? `/p/${p.slug}` : `/product/${p.id}`;\r\n                            // Nombre y precio display\r\n                            const name = p._displayName;\r\n                            const price = fmtCRC(typeof p.price === \"number\" ? p.price : p.price);\r\n\r\n                            return (\r\n                                <div key={key} className=\"product-card\">\r\n                                    <div className=\"product-media\">\r\n                                        <img\r\n                                            src={getImgSrc(p)}\r\n                                            alt={`Imagen de ${name}`}\r\n                                            className=\"product-thumb\"\r\n                                            loading=\"lazy\"\r\n                                            decoding=\"async\"\r\n                                            referrerPolicy=\"no-referrer\"\r\n                                            crossOrigin=\"anonymous\"\r\n                                            onError={(e) => {\r\n                                                if (e.currentTarget.dataset.fallback === \"1\") return;\r\n                                                e.currentTarget.dataset.fallback = \"1\";\r\n                                                e.currentTarget.src = noImage;\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"product-info\">\r\n                                        <h3 className=\"product-name\">{name}</h3>\r\n                                        <p className=\"product-price\">{price}</p>\r\n                                        <p className=\"product-category\">\r\n                                            {categoryIcon(p._normalizedCategory)} {categoryLabel(p._normalizedCategory)}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"product-actions\">\r\n                                        <button\r\n                                            className=\"btn-add-to-cart\"\r\n                                            onClick={() => addToCart(p)}\r\n                                            disabled={addingToCart === (p._id || p.id || p.slug)}\r\n                                        >\r\n                                            {addingToCart === (p._id || p.id || p.slug) ? (\r\n                                                <>\r\n                                                    <i className=\"fa fa-spinner fa-spin\"></i>\r\n                                                    Agregando...\r\n                                                </>\r\n                                            ) : (\r\n                                                <>\r\n                                                    <i className=\"fa fa-shopping-cart\"></i>\r\n                                                    Agregar al carrito\r\n                                                </>\r\n                                            )}\r\n                                        </button>\r\n\r\n                                        <Link\r\n                                            to={href}\r\n                                            className=\"btn-view-details\"\r\n                                            style={{ textDecoration: \"none\" }}\r\n                                        >\r\n                                            <i className=\"fa fa-eye\"></i>\r\n                                            Ver detalles\r\n                                        </Link>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    {filteredProducts.length === 0 && (\r\n                        <div className=\"no-products\">\r\n                            <i\r\n                                className=\"fa fa-search\"\r\n                                style={{ fontSize: \"3rem\", color: \"#666\", marginBottom: \"1rem\" }}\r\n                            ></i>\r\n                            <h3>No se encontraron productos</h3>\r\n                            <p>\r\n                                {searchTerm\r\n                                    ? `No hay productos que coincidan con \"${searchTerm}\"`\r\n                                    : \"No hay productos en esta categoría\"}\r\n                            </p>\r\n                            <p>Intenta cambiar los filtros o el término de búsqueda</p>\r\n                        </div>\r\n                    )}\r\n                </section>\r\n            </div>\r\n\r\n            {/* Animación notificación */}\r\n            <style jsx>{`\r\n        @keyframes slideIn {\r\n          from {\r\n            transform: translateX(100%);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translateX(0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n      `}</style>\r\n        </main>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}