{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jospa\\\\OneDrive\\\\Desktop\\\\artesjac-test2\\\\artesjac-test2\\\\src\\\\pages\\\\ProductPage.js\",\n  _s = $RefreshSig$();\n// src/pages/ProductPage.js\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, Link, useNavigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"../modules/auth/AuthContext\";\nimport { ShopAPI } from \"../api/shop.service\";\nimport { ReviewsAPI } from \"../api/reviews.service\";\nimport { CartAPI } from \"../api/cart.service\";\nimport { resolveImgUrl } from \"../utils/resolveImgUrl\";\nimport noImage from \"../assets/images/noimage.png\";\nimport \"../styles/product.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fmtCRC = n => typeof n === \"number\" ? `â‚¡${n.toLocaleString(\"es-CR\")}` : n;\nconst catLabel = c => {\n  const map = {\n    jewelery: \"JoyerÃ­a\",\n    art: \"Pintura\",\n    ceramics: \"CerÃ¡mica\",\n    textiles: \"Textil\",\n    decoration: \"DecoraciÃ³n\",\n    bags: \"Bolsos\",\n    wood: \"Madera\"\n  };\n  return map[c] || (c ? c[0].toUpperCase() + c.slice(1) : \"General\");\n};\nconst firstImg = p => {\n  const arr = Array.isArray(p === null || p === void 0 ? void 0 : p.images) ? p.images : [];\n  const candidate = arr.find(Boolean);\n  return candidate ? String(candidate).replace(/\\\\/g, \"/\") : null;\n};\nconst isObjectId = s => /^[a-f\\d]{24}$/i.test(String(s || \"\"));\nexport const ProductPage = () => {\n  _s();\n  const params = useParams();\n  const slugOrId = params.slug || params.id;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    user,\n    token\n  } = useAuth() || {};\n  const authToken = token || localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\");\n  const [product, setProduct] = useState(null);\n  const [sellerInfo, setSellerInfo] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [addedToCart, setAddedToCart] = useState(false);\n  const [productReviews, setProductReviews] = useState([]);\n  const [averageRating, setAverageRating] = useState(0);\n  const [userRating, setUserRating] = useState(0);\n  const [reviewComment, setReviewComment] = useState(\"\");\n  const [showReviewForm, setShowReviewForm] = useState(false);\n  const [storeReviews, setStoreReviews] = useState([]);\n  const [storeAvg, setStoreAvg] = useState(0);\n  const [storeUserRating, setStoreUserRating] = useState(0);\n  const [storeReviewComment, setStoreReviewComment] = useState(\"\");\n  const [showStoreReviewForm, setShowStoreReviewForm] = useState(false);\n  const renderStars = (rating, interactive = false, onStarClick = null) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `stars ${interactive ? \"interactive\" : \"\"}`,\n    children: [1, 2, 3, 4, 5].map(star => /*#__PURE__*/_jsxDEV(\"i\", {\n      className: `fa fa-star ${star <= Math.round(rating) ? \"active\" : \"\"}`,\n      onClick: interactive ? () => onStarClick(star) : undefined\n    }, star, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n  const load = async () => {\n    try {\n      var _resDetail$data;\n      const resDetail = await ShopAPI.get(slugOrId);\n      const detail = resDetail === null || resDetail === void 0 ? void 0 : (_resDetail$data = resDetail.data) === null || _resDetail$data === void 0 ? void 0 : _resDetail$data.data;\n      if (!detail) {\n        setProduct(null);\n        return;\n      }\n      setProduct(detail);\n      if (detail.vendorId) {\n        const vendorId = detail.vendorId._id || detail.vendorId.id || detail.vendorId;\n        setSellerInfo({\n          id: vendorId,\n          businessName: detail.vendorId.companyName || detail.vendorId.name,\n          name: detail.vendorId.name,\n          role: detail.vendorId.role,\n          avatar: detail.vendorId.avatar\n        });\n      } else setSellerInfo(null);\n      const pid = detail._id || detail.id;\n      if (pid) {\n        var _r$data;\n        const r = await ReviewsAPI.listProduct(pid, {\n          page: 1,\n          limit: 50\n        });\n        const list = (r === null || r === void 0 ? void 0 : (_r$data = r.data) === null || _r$data === void 0 ? void 0 : _r$data.data) || [];\n        setProductReviews(list);\n        const avg = list.reduce((a, b) => a + (b.rating || 0), 0) / (list.length || 1);\n        setAverageRating(list.length ? avg : 0);\n        const mine = user && list.find(x => {\n          var _x$userId;\n          return String(((_x$userId = x.userId) === null || _x$userId === void 0 ? void 0 : _x$userId._id) || x.userId) === String(user.id);\n        });\n        if (mine) {\n          setUserRating(mine.rating);\n          setReviewComment(mine.comment || \"\");\n        }\n      } else {\n        setProductReviews([]);\n        setAverageRating(0);\n      }\n      const vid = detail.vendorId && (detail.vendorId._id || detail.vendorId.id || detail.vendorId);\n      if (vid && isObjectId(vid)) {\n        var _r2$data;\n        const r2 = await ReviewsAPI.listStore(vid, {\n          page: 1,\n          limit: 50\n        });\n        const list2 = (r2 === null || r2 === void 0 ? void 0 : (_r2$data = r2.data) === null || _r2$data === void 0 ? void 0 : _r2$data.data) || [];\n        setStoreReviews(list2);\n        const avg2 = list2.reduce((a, b) => a + (b.rating || 0), 0) / (list2.length || 1);\n        setStoreAvg(list2.length ? avg2 : 0);\n        const mine2 = user && list2.find(x => {\n          var _x$userId2;\n          return String(((_x$userId2 = x.userId) === null || _x$userId2 === void 0 ? void 0 : _x$userId2._id) || x.userId) === String(user.id);\n        });\n        if (mine2) {\n          setStoreUserRating(mine2.rating);\n          setStoreReviewComment(mine2.comment || \"\");\n        }\n      } else {\n        setStoreReviews([]);\n        setStoreAvg(0);\n      }\n    } catch (err) {\n      var _err$response;\n      console.error(\"Product detail error:\", (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      setProduct(null);\n    }\n  };\n  useEffect(() => {\n    load(); /* eslint-disable-next-line */\n  }, [slugOrId]);\n  const imgSrc = React.useMemo(() => {\n    if (!product) return noImage;\n    const raw = Array.isArray(product === null || product === void 0 ? void 0 : product.images) && product.images.length ? product.images.find(Boolean) : (product === null || product === void 0 ? void 0 : product.image) || (product === null || product === void 0 ? void 0 : product.img) || (product === null || product === void 0 ? void 0 : product.thumbnail) || null;\n    if (!raw) return noImage;\n    const normalized = String(raw).replace(/\\\\/g, \"/\");\n    try {\n      return resolveImgUrl(normalized) || normalized || noImage;\n    } catch {\n      return normalized || noImage;\n    }\n  }, [product]);\n\n  // ðŸš€ Server-first: si no hay sesiÃ³n -> pedir login (sin 'location' global)\n  const handleAddToCart = async () => {\n    if (!product) return;\n    const id = product._id || product.id;\n    if (!authToken) {\n      const next = encodeURIComponent(`${location.pathname}${location.search || \"\"}`);\n      return navigate(`/login?next=${next}`);\n    }\n    try {\n      await CartAPI.add({\n        productId: id,\n        quantity\n      }, authToken);\n      setAddedToCart(true);\n      setTimeout(() => setAddedToCart(false), 2000);\n    } catch (e) {\n      var _e$response;\n      const status = e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status;\n      if (status === 401 || status === 403) {\n        const next = encodeURIComponent(`${location.pathname}${location.search || \"\"}`);\n        return navigate(`/login?next=${next}`);\n      }\n      alert(\"No se pudo guardar en tu carrito\");\n    }\n  };\n  const handleSubmitReview = async () => {\n    if (!user || user.userType !== \"buyer\" || !product || userRating === 0) return;\n    try {\n      const pid = product._id || product.id;\n      await ReviewsAPI.upsertProduct({\n        productId: pid,\n        rating: userRating,\n        comment: reviewComment\n      }, authToken);\n      await load();\n      setShowReviewForm(false);\n      alert(\"Â¡ReseÃ±a del producto guardada!\");\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Error al guardar reseÃ±a:\", error);\n      alert((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || \"Error al enviar la reseÃ±a\");\n    }\n  };\n  const handleSubmitStoreReview = async () => {\n    if (!user || user.userType !== \"buyer\" || !sellerInfo || storeUserRating === 0) return;\n    try {\n      await ReviewsAPI.upsertStore({\n        vendorId: sellerInfo.id,\n        rating: storeUserRating,\n        comment: storeReviewComment\n      }, authToken);\n      await load();\n      setShowStoreReviewForm(false);\n      alert(\"Â¡ReseÃ±a de la tienda guardada!\");\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error(\"Error al guardar reseÃ±a tienda:\", error);\n      alert((error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || \"Error al enviar la reseÃ±a\");\n    }\n  };\n  const mergedReviews = productReviews;\n  if (!product) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"product-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-not-found\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Producto no encontrado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/shop\",\n          className: \"btn-back-shop\",\n          children: \"Volver a la tienda\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"product-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"breadcrumb\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Inicio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 43\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/shop\",\n        children: \"Tienda\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 47\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"current\",\n        children: product.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-image-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-image-main\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"product-image-sim large\",\n            src: imgSrc,\n            alt: product.title,\n            loading: \"lazy\",\n            decoding: \"async\",\n            referrerPolicy: \"no-referrer\",\n            crossOrigin: \"anonymous\",\n            onError: e => {\n              e.currentTarget.onerror = null;\n              e.currentTarget.src = noImage;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-info-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-category\",\n          children: catLabel(product.category)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"product-title\",\n          children: product.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-rating\",\n          children: [renderStars(averageRating), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rating-text\",\n            children: [averageRating > 0 ? averageRating.toFixed(1) : \"Sin calificar\", productReviews.length ? ` (${productReviews.length} reseÃ±as)` : \"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-price-main\",\n          children: fmtCRC(product.price)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-description\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Descripci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: product.description || \"Sin descripciÃ³n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-purchase\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Cantidad:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"quantity-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setQuantity(Math.max(1, quantity - 1)),\n                className: \"quantity-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-minus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 121\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"quantity-display\",\n                children: quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setQuantity(quantity + 1),\n                className: \"quantity-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-plus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 108\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"purchase-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `btn-add-to-cart ${addedToCart ? \"added\" : \"\"}`,\n              onClick: handleAddToCart,\n              disabled: product.stock <= 0,\n              children: addedToCart ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-check\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 51\n                }, this), \" \\xA1Agregado!\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-shopping-cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 101\n                }, this), \" Agregar al carrito\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-buy-now\",\n              disabled: product.stock <= 0,\n              onClick: () => {\n                handleAddToCart();\n                setTimeout(() => navigate(\"/cart\"), 400);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-bolt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 33\n              }, this), \" Comprar ahora\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 25\n          }, this), user && user.userType === \"buyer\" && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-review-product\",\n            onClick: () => setShowReviewForm(true),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-star\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 33\n            }, this), \" Evaluar Producto\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-features\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feature\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-truck\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 50\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Env\\xEDo a todo Costa Rica\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 79\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feature\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-shield-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 50\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Garant\\xEDa de calidad artesanal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 84\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feature\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-heart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 50\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Hecho con amor por artesanos locales\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 79\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this), sellerInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seller-info-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFEA Informaci\\xF3n del Vendedor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seller-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seller-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seller-avatar\",\n            children: sellerInfo.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: sellerInfo.avatar,\n              alt: sellerInfo.businessName || sellerInfo.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 81\n            }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 164\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seller-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: sellerInfo.businessName || sellerInfo.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 33\n            }, this), sellerInfo.role && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"seller-category\",\n              children: String(sellerInfo.role).toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 54\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seller-actions\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/seller-profile/${sellerInfo.id || product.vendorId}`,\n            className: \"btn-view-store\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-eye\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 122\n            }, this), \" Ver Tienda Completa\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 29\n          }, this), user && user.userType === \"buyer\" && isObjectId(sellerInfo.id) && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowStoreReviewForm(true),\n            className: \"btn-review-product\",\n            style: {\n              marginLeft: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-star\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 37\n            }, this), \" Evaluar Tienda\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-reviews-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u2B50 Rese\\xF1as del Producto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }, this), mergedReviews.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviews-list\",\n        children: mergedReviews.slice(0, 10).map(rv => {\n          var _rv$userId, _rv$userId2, _rv$userId3;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reviewer-info\",\n                children: [(_rv$userId = rv.userId) !== null && _rv$userId !== void 0 && _rv$userId.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: rv.userId.avatar,\n                  alt: (_rv$userId2 = rv.userId) === null || _rv$userId2 === void 0 ? void 0 : _rv$userId2.name,\n                  className: \"review-avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 62\n                }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-user-circle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 143\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: ((_rv$userId3 = rv.userId) === null || _rv$userId3 === void 0 ? void 0 : _rv$userId3.name) || \"Usuario\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-rating\",\n                children: renderStars(rv.rating || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-date\",\n              children: new Date(rv.createdAt || rv.date).toLocaleDateString(\"es-CR\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 33\n            }, this), rv.comment && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-comment\",\n              children: rv.comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 48\n            }, this)]\n          }, rv._id || rv.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-reviews\",\n        children: \"A\\xFAn no hay rese\\xF1as para este producto.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }, this), sellerInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-reviews-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFEA Rese\\xF1as de la Tienda\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 21\n      }, this), storeReviews.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviews-list\",\n        children: storeReviews.slice(0, 10).map(rv => {\n          var _rv$userId4, _rv$userId5, _rv$userId6;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reviewer-info\",\n                children: [(_rv$userId4 = rv.userId) !== null && _rv$userId4 !== void 0 && _rv$userId4.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: rv.userId.avatar,\n                  alt: (_rv$userId5 = rv.userId) === null || _rv$userId5 === void 0 ? void 0 : _rv$userId5.name,\n                  className: \"review-avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 66\n                }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-user-circle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 147\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: ((_rv$userId6 = rv.userId) === null || _rv$userId6 === void 0 ? void 0 : _rv$userId6.name) || \"Usuario\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-rating\",\n                children: renderStars(rv.rating || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-date\",\n              children: new Date(rv.createdAt).toLocaleDateString(\"es-CR\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 37\n            }, this), rv.comment && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-comment\",\n              children: rv.comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 52\n            }, this)]\n          }, rv._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-reviews\",\n        children: \"A\\xFAn no hay rese\\xF1as para esta tienda.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navigation-actions\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/shop\",\n        className: \"btn-back\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 55\n        }, this), \" Volver a la tienda\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 13\n    }, this), showReviewForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setShowReviewForm(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Evaluar Producto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowReviewForm(false),\n            className: \"modal-close\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-times\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 102\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rating-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Calificaci\\xF3n del producto:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 61\n            }, this), renderStars(userRating, true, setUserRating)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comment-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Comentario (opcional):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 62\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: reviewComment,\n              onChange: e => setReviewComment(e.target.value),\n              placeholder: \"Contanos tu experiencia\\u2026\",\n              rows: 4\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 99\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowReviewForm(false),\n            className: \"btn-cancel\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSubmitReview,\n            className: \"btn-submit\",\n            disabled: userRating === 0,\n            children: \"Enviar Rese\\xF1a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 17\n    }, this), showStoreReviewForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setShowStoreReviewForm(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Evaluar Tienda\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowStoreReviewForm(false),\n            className: \"modal-close\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-times\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 107\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rating-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Calificaci\\xF3n de la tienda:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 61\n            }, this), renderStars(storeUserRating, true, setStoreUserRating)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comment-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Comentario (opcional):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 62\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: storeReviewComment,\n              onChange: e => setStoreReviewComment(e.target.value),\n              placeholder: \"\\xBFC\\xF3mo fue tu experiencia con la tienda?\",\n              rows: 4\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 99\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowStoreReviewForm(false),\n            className: \"btn-cancel\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSubmitStoreReview,\n            className: \"btn-submit\",\n            disabled: storeUserRating === 0,\n            children: \"Enviar Rese\\xF1a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 9\n  }, this);\n};\n_s(ProductPage, \"aV2MWKCWSzcXKfSJDHFveaVF17Y=\", false, function () {\n  return [useParams, useNavigate, useLocation, useAuth];\n});\n_c = ProductPage;\nexport default ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","useLocation","useAuth","ShopAPI","ReviewsAPI","CartAPI","resolveImgUrl","noImage","jsxDEV","_jsxDEV","Fragment","_Fragment","fmtCRC","n","toLocaleString","catLabel","c","map","jewelery","art","ceramics","textiles","decoration","bags","wood","toUpperCase","slice","firstImg","p","arr","Array","isArray","images","candidate","find","Boolean","String","replace","isObjectId","s","test","ProductPage","_s","params","slugOrId","slug","id","navigate","location","user","token","authToken","localStorage","getItem","product","setProduct","sellerInfo","setSellerInfo","quantity","setQuantity","addedToCart","setAddedToCart","productReviews","setProductReviews","averageRating","setAverageRating","userRating","setUserRating","reviewComment","setReviewComment","showReviewForm","setShowReviewForm","storeReviews","setStoreReviews","storeAvg","setStoreAvg","storeUserRating","setStoreUserRating","storeReviewComment","setStoreReviewComment","showStoreReviewForm","setShowStoreReviewForm","renderStars","rating","interactive","onStarClick","className","children","star","Math","round","onClick","undefined","fileName","_jsxFileName","lineNumber","columnNumber","load","_resDetail$data","resDetail","get","detail","data","vendorId","_id","businessName","companyName","name","role","avatar","pid","_r$data","r","listProduct","page","limit","list","avg","reduce","a","b","length","mine","x","_x$userId","userId","comment","vid","_r2$data","r2","listStore","list2","avg2","mine2","_x$userId2","err","_err$response","console","error","response","message","imgSrc","useMemo","raw","image","img","thumbnail","normalized","handleAddToCart","next","encodeURIComponent","pathname","search","add","productId","setTimeout","e","_e$response","status","alert","handleSubmitReview","userType","upsertProduct","_error$response","_error$response$data","handleSubmitStoreReview","upsertStore","_error$response2","_error$response2$data","mergedReviews","to","title","src","alt","loading","decoding","referrerPolicy","crossOrigin","onError","currentTarget","onerror","category","toFixed","price","description","max","disabled","stock","style","marginLeft","rv","_rv$userId","_rv$userId2","_rv$userId3","Date","createdAt","date","toLocaleDateString","_rv$userId4","_rv$userId5","_rv$userId6","stopPropagation","value","onChange","target","placeholder","rows","_c","$RefreshReg$"],"sources":["C:/Users/jospa/OneDrive/Desktop/artesjac-test2/artesjac-test2/src/pages/ProductPage.js"],"sourcesContent":["// src/pages/ProductPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"../modules/auth/AuthContext\";\r\nimport { ShopAPI } from \"../api/shop.service\";\r\nimport { ReviewsAPI } from \"../api/reviews.service\";\r\nimport { CartAPI } from \"../api/cart.service\";\r\nimport { resolveImgUrl } from \"../utils/resolveImgUrl\";\r\nimport noImage from \"../assets/images/noimage.png\";\r\nimport \"../styles/product.css\";\r\n\r\nconst fmtCRC = (n) => (typeof n === \"number\" ? `â‚¡${n.toLocaleString(\"es-CR\")}` : n);\r\nconst catLabel = (c) => {\r\n    const map = { jewelery: \"JoyerÃ­a\", art: \"Pintura\", ceramics: \"CerÃ¡mica\", textiles: \"Textil\", decoration: \"DecoraciÃ³n\", bags: \"Bolsos\", wood: \"Madera\" };\r\n    return map[c] || (c ? c[0].toUpperCase() + c.slice(1) : \"General\");\r\n};\r\nconst firstImg = (p) => {\r\n    const arr = Array.isArray(p?.images) ? p.images : [];\r\n    const candidate = arr.find(Boolean);\r\n    return candidate ? String(candidate).replace(/\\\\/g, \"/\") : null;\r\n};\r\nconst isObjectId = (s) => /^[a-f\\d]{24}$/i.test(String(s || \"\"));\r\n\r\nexport const ProductPage = () => {\r\n    const params = useParams();\r\n    const slugOrId = params.slug || params.id;\r\n\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const { user, token } = useAuth() || {};\r\n    const authToken = token || localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\");\r\n\r\n    const [product, setProduct] = useState(null);\r\n    const [sellerInfo, setSellerInfo] = useState(null);\r\n\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [addedToCart, setAddedToCart] = useState(false);\r\n\r\n    const [productReviews, setProductReviews] = useState([]);\r\n    const [averageRating, setAverageRating] = useState(0);\r\n    const [userRating, setUserRating] = useState(0);\r\n    const [reviewComment, setReviewComment] = useState(\"\");\r\n    const [showReviewForm, setShowReviewForm] = useState(false);\r\n\r\n    const [storeReviews, setStoreReviews] = useState([]);\r\n    const [storeAvg, setStoreAvg] = useState(0);\r\n    const [storeUserRating, setStoreUserRating] = useState(0);\r\n    const [storeReviewComment, setStoreReviewComment] = useState(\"\");\r\n    const [showStoreReviewForm, setShowStoreReviewForm] = useState(false);\r\n\r\n    const renderStars = (rating, interactive = false, onStarClick = null) => (\r\n        <div className={`stars ${interactive ? \"interactive\" : \"\"}`}>\r\n            {[1, 2, 3, 4, 5].map((star) => (\r\n                <i\r\n                    key={star}\r\n                    className={`fa fa-star ${star <= Math.round(rating) ? \"active\" : \"\"}`}\r\n                    onClick={interactive ? () => onStarClick(star) : undefined}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    const load = async () => {\r\n        try {\r\n            const resDetail = await ShopAPI.get(slugOrId);\r\n            const detail = resDetail?.data?.data;\r\n            if (!detail) { setProduct(null); return; }\r\n            setProduct(detail);\r\n\r\n            if (detail.vendorId) {\r\n                const vendorId = detail.vendorId._id || detail.vendorId.id || detail.vendorId;\r\n                setSellerInfo({\r\n                    id: vendorId,\r\n                    businessName: detail.vendorId.companyName || detail.vendorId.name,\r\n                    name: detail.vendorId.name,\r\n                    role: detail.vendorId.role,\r\n                    avatar: detail.vendorId.avatar,\r\n                });\r\n            } else setSellerInfo(null);\r\n\r\n            const pid = detail._id || detail.id;\r\n            if (pid) {\r\n                const r = await ReviewsAPI.listProduct(pid, { page: 1, limit: 50 });\r\n                const list = r?.data?.data || [];\r\n                setProductReviews(list);\r\n                const avg = list.reduce((a, b) => a + (b.rating || 0), 0) / (list.length || 1);\r\n                setAverageRating(list.length ? avg : 0);\r\n                const mine = user && list.find((x) => String(x.userId?._id || x.userId) === String(user.id));\r\n                if (mine) { setUserRating(mine.rating); setReviewComment(mine.comment || \"\"); }\r\n            } else { setProductReviews([]); setAverageRating(0); }\r\n\r\n            const vid = detail.vendorId && (detail.vendorId._id || detail.vendorId.id || detail.vendorId);\r\n            if (vid && isObjectId(vid)) {\r\n                const r2 = await ReviewsAPI.listStore(vid, { page: 1, limit: 50 });\r\n                const list2 = r2?.data?.data || [];\r\n                setStoreReviews(list2);\r\n                const avg2 = list2.reduce((a, b) => a + (b.rating || 0), 0) / (list2.length || 1);\r\n                setStoreAvg(list2.length ? avg2 : 0);\r\n                const mine2 = user && list2.find((x) => String(x.userId?._id || x.userId) === String(user.id));\r\n                if (mine2) { setStoreUserRating(mine2.rating); setStoreReviewComment(mine2.comment || \"\"); }\r\n            } else { setStoreReviews([]); setStoreAvg(0); }\r\n        } catch (err) {\r\n            console.error(\"Product detail error:\", err?.response?.data || err.message);\r\n            setProduct(null);\r\n        }\r\n    };\r\n\r\n    useEffect(() => { load(); /* eslint-disable-next-line */ }, [slugOrId]);\r\n\r\n    const imgSrc = React.useMemo(() => {\r\n        if (!product) return noImage;\r\n        const raw = Array.isArray(product?.images) && product.images.length\r\n            ? product.images.find(Boolean)\r\n            : product?.image || product?.img || product?.thumbnail || null;\r\n        if (!raw) return noImage;\r\n        const normalized = String(raw).replace(/\\\\/g, \"/\");\r\n        try { return resolveImgUrl(normalized) || normalized || noImage; }\r\n        catch { return normalized || noImage; }\r\n    }, [product]);\r\n\r\n    // ðŸš€ Server-first: si no hay sesiÃ³n -> pedir login (sin 'location' global)\r\n    const handleAddToCart = async () => {\r\n        if (!product) return;\r\n        const id = product._id || product.id;\r\n\r\n        if (!authToken) {\r\n            const next = encodeURIComponent(`${location.pathname}${location.search || \"\"}`);\r\n            return navigate(`/login?next=${next}`);\r\n        }\r\n\r\n        try {\r\n            await CartAPI.add({ productId: id, quantity }, authToken);\r\n            setAddedToCart(true);\r\n            setTimeout(() => setAddedToCart(false), 2000);\r\n        } catch (e) {\r\n            const status = e?.response?.status;\r\n            if (status === 401 || status === 403) {\r\n                const next = encodeURIComponent(`${location.pathname}${location.search || \"\"}`);\r\n                return navigate(`/login?next=${next}`);\r\n            }\r\n            alert(\"No se pudo guardar en tu carrito\");\r\n        }\r\n    };\r\n\r\n    const handleSubmitReview = async () => {\r\n        if (!user || user.userType !== \"buyer\" || !product || userRating === 0) return;\r\n        try {\r\n            const pid = product._id || product.id;\r\n            await ReviewsAPI.upsertProduct({ productId: pid, rating: userRating, comment: reviewComment }, authToken);\r\n            await load(); setShowReviewForm(false); alert(\"Â¡ReseÃ±a del producto guardada!\");\r\n        } catch (error) {\r\n            console.error(\"Error al guardar reseÃ±a:\", error);\r\n            alert(error?.response?.data?.error || \"Error al enviar la reseÃ±a\");\r\n        }\r\n    };\r\n\r\n    const handleSubmitStoreReview = async () => {\r\n        if (!user || user.userType !== \"buyer\" || !sellerInfo || storeUserRating === 0) return;\r\n        try {\r\n            await ReviewsAPI.upsertStore({ vendorId: sellerInfo.id, rating: storeUserRating, comment: storeReviewComment }, authToken);\r\n            await load(); setShowStoreReviewForm(false); alert(\"Â¡ReseÃ±a de la tienda guardada!\");\r\n        } catch (error) {\r\n            console.error(\"Error al guardar reseÃ±a tienda:\", error);\r\n            alert(error?.response?.data?.error || \"Error al enviar la reseÃ±a\");\r\n        }\r\n    };\r\n\r\n    const mergedReviews = productReviews;\r\n\r\n    if (!product) {\r\n        return (\r\n            <main className=\"product-container\">\r\n                <div className=\"product-not-found\">\r\n                    <h2>Producto no encontrado</h2>\r\n                    <Link to=\"/shop\" className=\"btn-back-shop\">Volver a la tienda</Link>\r\n                </div>\r\n            </main>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <main className=\"product-container\">\r\n            {/* Breadcrumb */}\r\n            <nav className=\"breadcrumb\">\r\n                <Link to=\"/\">Inicio</Link><span>/</span>\r\n                <Link to=\"/shop\">Tienda</Link><span>/</span>\r\n                <span className=\"current\">{product.title}</span>\r\n            </nav>\r\n\r\n            <div className=\"product-detail\">\r\n                {/* Imagen */}\r\n                <div className=\"product-image-section\">\r\n                    <div className=\"product-image-main\">\r\n                        <img className=\"product-image-sim large\" src={imgSrc} alt={product.title}\r\n                            loading=\"lazy\" decoding=\"async\" referrerPolicy=\"no-referrer\" crossOrigin=\"anonymous\"\r\n                            onError={(e) => { e.currentTarget.onerror = null; e.currentTarget.src = noImage; }} />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Info */}\r\n                <div className=\"product-info-section\">\r\n                    <div className=\"product-category\">{catLabel(product.category)}</div>\r\n                    <h1 className=\"product-title\">{product.title}</h1>\r\n\r\n                    <div className=\"product-rating\">\r\n                        {renderStars(averageRating)}\r\n                        <span className=\"rating-text\">\r\n                            {averageRating > 0 ? averageRating.toFixed(1) : \"Sin calificar\"}\r\n                            {productReviews.length ? ` (${productReviews.length} reseÃ±as)` : \"\"}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div className=\"product-price-main\">{fmtCRC(product.price)}</div>\r\n\r\n                    <div className=\"product-description\">\r\n                        <h3>DescripciÃ³n</h3>\r\n                        <p>{product.description || \"Sin descripciÃ³n\"}</p>\r\n                    </div>\r\n\r\n                    <div className=\"product-purchase\">\r\n                        <div className=\"quantity-section\">\r\n                            <label>Cantidad:</label>\r\n                            <div className=\"quantity-controls\">\r\n                                <button onClick={() => setQuantity(Math.max(1, quantity - 1))} className=\"quantity-btn\"><i className=\"fa fa-minus\" /></button>\r\n                                <span className=\"quantity-display\">{quantity}</span>\r\n                                <button onClick={() => setQuantity(quantity + 1)} className=\"quantity-btn\"><i className=\"fa fa-plus\" /></button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"purchase-actions\">\r\n                            <button className={`btn-add-to-cart ${addedToCart ? \"added\" : \"\"}`} onClick={handleAddToCart} disabled={product.stock <= 0}>\r\n                                {addedToCart ? (<><i className=\"fa fa-check\" /> Â¡Agregado!</>) : (<><i className=\"fa fa-shopping-cart\" /> Agregar al carrito</>)}\r\n                            </button>\r\n                            <button className=\"btn-buy-now\" disabled={product.stock <= 0} onClick={() => { handleAddToCart(); setTimeout(() => navigate(\"/cart\"), 400); }}>\r\n                                <i className=\"fa fa-bolt\" /> Comprar ahora\r\n                            </button>\r\n                        </div>\r\n\r\n                        {user && user.userType === \"buyer\" && (\r\n                            <button className=\"btn-review-product\" onClick={() => setShowReviewForm(true)}>\r\n                                <i className=\"fa fa-star\" /> Evaluar Producto\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"product-features\">\r\n                        <div className=\"feature\"><i className=\"fa fa-truck\" /><span>EnvÃ­o a todo Costa Rica</span></div>\r\n                        <div className=\"feature\"><i className=\"fa fa-shield-alt\" /><span>GarantÃ­a de calidad artesanal</span></div>\r\n                        <div className=\"feature\"><i className=\"fa fa-heart\" /><span>Hecho con amor por artesanos locales</span></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Vendedor */}\r\n            {sellerInfo && (\r\n                <div className=\"seller-info-section\">\r\n                    <h2>ðŸª InformaciÃ³n del Vendedor</h2>\r\n                    <div className=\"seller-card\">\r\n                        <div className=\"seller-header\">\r\n                            <div className=\"seller-avatar\">{sellerInfo.avatar ? <img src={sellerInfo.avatar} alt={sellerInfo.businessName || sellerInfo.name} /> : <i className=\"fa fa-store\" />}</div>\r\n                            <div className=\"seller-details\">\r\n                                <h3>{sellerInfo.businessName || sellerInfo.name}</h3>\r\n                                {sellerInfo.role && (<p className=\"seller-category\">{String(sellerInfo.role).toUpperCase()}</p>)}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"seller-actions\">\r\n                            <Link to={`/seller-profile/${sellerInfo.id || product.vendorId}`} className=\"btn-view-store\"><i className=\"fa fa-eye\" /> Ver Tienda Completa</Link>\r\n                            {user && user.userType === \"buyer\" && isObjectId(sellerInfo.id) && (\r\n                                <button onClick={() => setShowStoreReviewForm(true)} className=\"btn-review-product\" style={{ marginLeft: 8 }}>\r\n                                    <i className=\"fa fa-star\" /> Evaluar Tienda\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* ReseÃ±as de PRODUCTO */}\r\n            <div className=\"product-reviews-section\">\r\n                <h2>â­ ReseÃ±as del Producto</h2>\r\n                {mergedReviews.length ? (\r\n                    <div className=\"reviews-list\">\r\n                        {mergedReviews.slice(0, 10).map((rv) => (\r\n                            <div key={rv._id || rv.id} className=\"review-item\">\r\n                                <div className=\"review-header\">\r\n                                    <div className=\"reviewer-info\">\r\n                                        {rv.userId?.avatar ? <img src={rv.userId.avatar} alt={rv.userId?.name} className=\"review-avatar\" /> : <i className=\"fa fa-user-circle\" />}\r\n                                        <span>{rv.userId?.name || \"Usuario\"}</span>\r\n                                    </div>\r\n                                    <div className=\"review-rating\">{renderStars(rv.rating || 0)}</div>\r\n                                </div>\r\n                                <div className=\"review-date\">{new Date(rv.createdAt || rv.date).toLocaleDateString(\"es-CR\")}</div>\r\n                                {rv.comment && <div className=\"review-comment\">{rv.comment}</div>}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : <p className=\"no-reviews\">AÃºn no hay reseÃ±as para este producto.</p>}\r\n            </div>\r\n\r\n            {/* ReseÃ±as de TIENDA */}\r\n            {sellerInfo && (\r\n                <div className=\"product-reviews-section\">\r\n                    <h2>ðŸª ReseÃ±as de la Tienda</h2>\r\n                    {storeReviews.length ? (\r\n                        <div className=\"reviews-list\">\r\n                            {storeReviews.slice(0, 10).map((rv) => (\r\n                                <div key={rv._id} className=\"review-item\">\r\n                                    <div className=\"review-header\">\r\n                                        <div className=\"reviewer-info\">\r\n                                            {rv.userId?.avatar ? <img src={rv.userId.avatar} alt={rv.userId?.name} className=\"review-avatar\" /> : <i className=\"fa fa-user-circle\" />}\r\n                                            <span>{rv.userId?.name || \"Usuario\"}</span>\r\n                                        </div>\r\n                                        <div className=\"review-rating\">{renderStars(rv.rating || 0)}</div>\r\n                                    </div>\r\n                                    <div className=\"review-date\">{new Date(rv.createdAt).toLocaleDateString(\"es-CR\")}</div>\r\n                                    {rv.comment && <div className=\"review-comment\">{rv.comment}</div>}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : <p className=\"no-reviews\">AÃºn no hay reseÃ±as para esta tienda.</p>}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"navigation-actions\">\r\n                <Link to=\"/shop\" className=\"btn-back\"><i className=\"fa fa-arrow-left\" /> Volver a la tienda</Link>\r\n            </div>\r\n\r\n            {/* Modalesâ€¦ (sin cambios visuales) */}\r\n            {showReviewForm && (\r\n                <div className=\"modal-overlay\" onClick={() => setShowReviewForm(false)}>\r\n                    <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n                        <div className=\"modal-header\">\r\n                            <h2>Evaluar Producto</h2>\r\n                            <button onClick={() => setShowReviewForm(false)} className=\"modal-close\"><i className=\"fa fa-times\" /></button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"rating-section\"><label>CalificaciÃ³n del producto:</label>{renderStars(userRating, true, setUserRating)}</div>\r\n                            <div className=\"comment-section\"><label>Comentario (opcional):</label><textarea value={reviewComment} onChange={(e) => setReviewComment(e.target.value)} placeholder=\"Contanos tu experienciaâ€¦\" rows={4} /></div>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button onClick={() => setShowReviewForm(false)} className=\"btn-cancel\">Cancelar</button>\r\n                            <button onClick={handleSubmitReview} className=\"btn-submit\" disabled={userRating === 0}>Enviar ReseÃ±a</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {showStoreReviewForm && (\r\n                <div className=\"modal-overlay\" onClick={() => setShowStoreReviewForm(false)}>\r\n                    <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n                        <div className=\"modal-header\">\r\n                            <h2>Evaluar Tienda</h2>\r\n                            <button onClick={() => setShowStoreReviewForm(false)} className=\"modal-close\"><i className=\"fa fa-times\" /></button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"rating-section\"><label>CalificaciÃ³n de la tienda:</label>{renderStars(storeUserRating, true, setStoreUserRating)}</div>\r\n                            <div className=\"comment-section\"><label>Comentario (opcional):</label><textarea value={storeReviewComment} onChange={(e) => setStoreReviewComment(e.target.value)} placeholder=\"Â¿CÃ³mo fue tu experiencia con la tienda?\" rows={4} /></div>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button onClick={() => setShowStoreReviewForm(false)} className=\"btn-cancel\">Cancelar</button>\r\n                            <button onClick={handleSubmitStoreReview} className=\"btn-submit\" disabled={storeUserRating === 0}>Enviar ReseÃ±a</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default ProductPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}