{"ast":null,"code":"// src/api/cart.service.js\nimport { api } from \"../api\";\n\n// Lee token de donde esté y lo limpia (quita \"Bearer \" y valores \"null\"/\"undefined\")\nconst getAuthToken = () => {\n  const raw = localStorage.getItem(\"authToken\") || localStorage.getItem(\"token\") || localStorage.getItem(\"accessToken\") || \"\"; // puede venir vacío\n\n  const val = String(raw).trim();\n  if (!val || val === \"null\" || val === \"undefined\") return null;\n  return val.startsWith(\"Bearer \") ? val.slice(7) : val;\n};\nconst authHeaders = () => {\n  const t = getAuthToken();\n  return t ? {\n    headers: {\n      Authorization: `Bearer ${t}`\n    }\n  } : {};\n};\nexport const CartAPI = {\n  get: () => api.get(\"/cart\", authHeaders()),\n  add: ({\n    productId,\n    productRef,\n    quantity = 1\n  }) => api.post(\"/cart/items\", {\n    productId,\n    productRef,\n    quantity\n  }, authHeaders()),\n  update: ({\n    productId,\n    quantity\n  }) => api.put(\"/cart/items\", {\n    productId,\n    quantity\n  }, authHeaders()),\n  remove: ({\n    productId\n  }) => api.delete(`/cart/items/${productId}`, authHeaders()),\n  clear: () => api.delete(\"/cart\", authHeaders())\n};","map":{"version":3,"names":["api","getAuthToken","raw","localStorage","getItem","val","String","trim","startsWith","slice","authHeaders","t","headers","Authorization","CartAPI","get","add","productId","productRef","quantity","post","update","put","remove","delete","clear"],"sources":["C:/Users/jospa/OneDrive/Desktop/artesjac-test2/artesjac-test2/src/api/cart.service.js"],"sourcesContent":["// src/api/cart.service.js\r\nimport { api } from \"../api\";\r\n\r\n// Lee token de donde esté y lo limpia (quita \"Bearer \" y valores \"null\"/\"undefined\")\r\nconst getAuthToken = () => {\r\n    const raw =\r\n        localStorage.getItem(\"authToken\") ||\r\n        localStorage.getItem(\"token\") ||\r\n        localStorage.getItem(\"accessToken\") ||\r\n        \"\"; // puede venir vacío\r\n\r\n    const val = String(raw).trim();\r\n    if (!val || val === \"null\" || val === \"undefined\") return null;\r\n    return val.startsWith(\"Bearer \") ? val.slice(7) : val;\r\n};\r\n\r\nconst authHeaders = () => {\r\n    const t = getAuthToken();\r\n    return t ? { headers: { Authorization: `Bearer ${t}` } } : {};\r\n};\r\n\r\nexport const CartAPI = {\r\n    get: () => api.get(\"/cart\", authHeaders()),\r\n\r\n    add: ({ productId, productRef, quantity = 1 }) =>\r\n        api.post(\"/cart/items\", { productId, productRef, quantity }, authHeaders()),\r\n\r\n    update: ({ productId, quantity }) =>\r\n        api.put(\"/cart/items\", { productId, quantity }, authHeaders()),\r\n\r\n    remove: ({ productId }) =>\r\n        api.delete(`/cart/items/${productId}`, authHeaders()),\r\n\r\n    clear: () => api.delete(\"/cart\", authHeaders()),\r\n};\r\n"],"mappings":"AAAA;AACA,SAASA,GAAG,QAAQ,QAAQ;;AAE5B;AACA,MAAMC,YAAY,GAAGA,CAAA,KAAM;EACvB,MAAMC,GAAG,GACLC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,IACjCD,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAC7BD,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IACnC,EAAE,CAAC,CAAC;;EAER,MAAMC,GAAG,GAAGC,MAAM,CAACJ,GAAG,CAAC,CAACK,IAAI,CAAC,CAAC;EAC9B,IAAI,CAACF,GAAG,IAAIA,GAAG,KAAK,MAAM,IAAIA,GAAG,KAAK,WAAW,EAAE,OAAO,IAAI;EAC9D,OAAOA,GAAG,CAACG,UAAU,CAAC,SAAS,CAAC,GAAGH,GAAG,CAACI,KAAK,CAAC,CAAC,CAAC,GAAGJ,GAAG;AACzD,CAAC;AAED,MAAMK,WAAW,GAAGA,CAAA,KAAM;EACtB,MAAMC,CAAC,GAAGV,YAAY,CAAC,CAAC;EACxB,OAAOU,CAAC,GAAG;IAAEC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUF,CAAC;IAAG;EAAE,CAAC,GAAG,CAAC,CAAC;AACjE,CAAC;AAED,OAAO,MAAMG,OAAO,GAAG;EACnBC,GAAG,EAAEA,CAAA,KAAMf,GAAG,CAACe,GAAG,CAAC,OAAO,EAAEL,WAAW,CAAC,CAAC,CAAC;EAE1CM,GAAG,EAAEA,CAAC;IAAEC,SAAS;IAAEC,UAAU;IAAEC,QAAQ,GAAG;EAAE,CAAC,KACzCnB,GAAG,CAACoB,IAAI,CAAC,aAAa,EAAE;IAAEH,SAAS;IAAEC,UAAU;IAAEC;EAAS,CAAC,EAAET,WAAW,CAAC,CAAC,CAAC;EAE/EW,MAAM,EAAEA,CAAC;IAAEJ,SAAS;IAAEE;EAAS,CAAC,KAC5BnB,GAAG,CAACsB,GAAG,CAAC,aAAa,EAAE;IAAEL,SAAS;IAAEE;EAAS,CAAC,EAAET,WAAW,CAAC,CAAC,CAAC;EAElEa,MAAM,EAAEA,CAAC;IAAEN;EAAU,CAAC,KAClBjB,GAAG,CAACwB,MAAM,CAAC,eAAeP,SAAS,EAAE,EAAEP,WAAW,CAAC,CAAC,CAAC;EAEzDe,KAAK,EAAEA,CAAA,KAAMzB,GAAG,CAACwB,MAAM,CAAC,OAAO,EAAEd,WAAW,CAAC,CAAC;AAClD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}