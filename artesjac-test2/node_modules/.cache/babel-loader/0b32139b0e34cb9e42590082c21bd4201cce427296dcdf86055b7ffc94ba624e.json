{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jospa\\\\OneDrive\\\\Desktop\\\\artesjac-test2\\\\artesjac-test2\\\\src\\\\pages\\\\ProductPage.js\",\n  _s = $RefreshSig$();\n// src/pages/ProductPage.js\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../modules/auth/AuthContext\";\nimport { ShopAPI } from \"../api/shop.service\";\nimport { resolveImgUrl } from \"../utils/resolveImgUrl\";\nimport noImage from \"../assets/images/noimage.png\";\nimport \"../styles/product.css\";\n\n// Formateo de colones CR\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fmtCRC = n => typeof n === \"number\" ? `₡${n.toLocaleString(\"es-CR\")}` : n;\n\n// Traducción simple de categorías (si en DB están en inglés)\nconst catLabel = c => {\n  const map = {\n    jewelery: \"Joyería\",\n    art: \"Pintura\",\n    ceramics: \"Cerámica\",\n    textiles: \"Textil\",\n    decoration: \"Decoración\",\n    bags: \"Bolsos\",\n    wood: \"Madera\"\n  };\n  return map[c] || (c ? c[0].toUpperCase() + c.slice(1) : \"General\");\n};\n\n// Saca la primera imagen válida del arreglo\nconst firstImg = p => {\n  const arr = Array.isArray(p === null || p === void 0 ? void 0 : p.images) ? p.images : [];\n  const candidate = arr.find(Boolean);\n  return candidate ? String(candidate).replace(/\\\\/g, \"/\") : null;\n};\nexport const ProductPage = () => {\n  _s();\n  // Soporta ruta /p/:slug o /product/:id (cualquiera de los dos)\n  const params = useParams();\n  const slugOrId = params.slug || params.id;\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  const [product, setProduct] = useState(null);\n  const [sellerInfo, setSellerInfo] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [addedToCart, setAddedToCart] = useState(false);\n  const [productReviews, setProductReviews] = useState([]);\n  const [averageRating, setAverageRating] = useState(0);\n  const [userRating, setUserRating] = useState(0);\n  const [reviewComment, setReviewComment] = useState(\"\");\n  const [showReviewForm, setShowReviewForm] = useState(false);\n\n  // Cargar detalle + reseñas reales (públicas)\n  const load = async () => {\n    try {\n      var _resDetail$data;\n      // Detalle por slugOrId (axios-like: res.data => { ok, data })\n      const resDetail = await ShopAPI.get(slugOrId);\n      const detail = resDetail === null || resDetail === void 0 ? void 0 : (_resDetail$data = resDetail.data) === null || _resDetail$data === void 0 ? void 0 : _resDetail$data.data;\n      if (!detail) {\n        setProduct(null);\n        return;\n      }\n      setProduct(detail);\n\n      // Vendedor público embebido\n      if (detail.vendorId) {\n        setSellerInfo({\n          id: detail.vendorId._id || detail.vendorId.id,\n          businessName: detail.vendorId.companyName || detail.vendorId.name,\n          name: detail.vendorId.name,\n          role: detail.vendorId.role,\n          avatar: detail.vendorId.avatar\n        });\n      } else {\n        setSellerInfo(null);\n      }\n\n      // Rating agregado desde el mismo detalle (si backend lo manda)\n      if (typeof detail.averageRating === \"number\") {\n        setAverageRating(detail.averageRating);\n      } else {\n        setAverageRating(0);\n      }\n\n      // Reseñas aprobadas públicas\n      const pid = detail._id || detail.id;\n      if (pid) {\n        var _resReviews$data;\n        const resReviews = await ShopAPI.reviews(pid, {\n          page: 1,\n          limit: 10\n        });\n        const list = (resReviews === null || resReviews === void 0 ? void 0 : (_resReviews$data = resReviews.data) === null || _resReviews$data === void 0 ? void 0 : _resReviews$data.data) || [];\n        setProductReviews(list);\n\n        // Si el detalle no trae average, calcularlo localmente\n        if (typeof detail.averageRating !== \"number\") {\n          const sum = list.reduce((acc, rv) => acc + (rv.rating || 0), 0);\n          setAverageRating(list.length ? sum / list.length : 0);\n        }\n      } else {\n        setProductReviews([]);\n      }\n    } catch (err) {\n      var _err$response;\n      console.error(\"Product detail error:\", (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      setProduct(null);\n    }\n  };\n  useEffect(() => {\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [slugOrId]);\n\n  // Agregar al carrito (compatibilidad: guarda id, name, etc.)\n  const handleAddToCart = () => {\n    if (!product) return;\n    try {\n      const savedCart = localStorage.getItem(\"artesjac-cart\");\n      let cart = savedCart ? JSON.parse(savedCart) : [];\n      const cartId = product._id || product.id;\n      const existing = cart.find(it => it.id === cartId);\n      const img = firstImg(product);\n      if (existing) {\n        cart = cart.map(it => it.id === cartId ? {\n          ...it,\n          quantity: (it.quantity || 1) + quantity\n        } : it);\n      } else {\n        cart.push({\n          id: cartId,\n          // compatibilidad con lógicas previas\n          productId: cartId,\n          slug: product.slug,\n          name: product.title,\n          // compatibilidad con UIs que esperan \"name\"\n          title: product.title,\n          price: product.price,\n          quantity,\n          image: img,\n          category: product.category,\n          stock: product.stock\n        });\n      }\n      localStorage.setItem(\"artesjac-cart\", JSON.stringify(cart));\n      setAddedToCart(true);\n      setTimeout(() => setAddedToCart(false), 2500);\n    } catch (error) {\n      console.error(\"Error al agregar al carrito:\", error);\n    }\n  };\n\n  // En esta versión seguimos usando localStorage para enviar reseñas (no hay POST público aún)\n  const handleSubmitReview = () => {\n    if (!user || userRating === 0 || !product) return;\n    const newReview = {\n      _id: `local_${Date.now()}`,\n      userId: {\n        name: user.name || \"Usuario\"\n      },\n      // para calzar con el shape público\n      rating: userRating,\n      comment: reviewComment,\n      createdAt: new Date().toISOString(),\n      _local: true // flag local\n    };\n    try {\n      const pid = product._id || product.id || product.slug;\n      const key = `product_reviews_${pid}`;\n      const existingLocal = localStorage.getItem(key);\n      const localArr = existingLocal ? JSON.parse(existingLocal) : [];\n      const updated = [newReview, ...productReviews, ...localArr];\n      localStorage.setItem(key, JSON.stringify(updated));\n      setProductReviews(updated);\n\n      // Recalcular promedio (local)\n      const sum = updated.reduce((acc, rv) => acc + (rv.rating || 0), 0);\n      setAverageRating(updated.length ? sum / updated.length : 0);\n      setUserRating(0);\n      setReviewComment(\"\");\n      setShowReviewForm(false);\n      alert(\"¡Reseña enviada! (local)\");\n    } catch (error) {\n      console.error(\"Error al guardar reseña:\", error);\n      alert(\"Error al enviar la reseña\");\n    }\n  };\n  const renderStars = (rating, interactive = false, onStarClick = null) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `stars ${interactive ? \"interactive\" : \"\"}`,\n    children: [1, 2, 3, 4, 5].map(star => /*#__PURE__*/_jsxDEV(\"i\", {\n      className: `fa fa-star ${star <= Math.round(rating) ? \"active\" : \"\"}`,\n      onClick: interactive ? () => onStarClick(star) : undefined\n    }, star, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 9\n  }, this);\n\n  // Fusión reseñas de API + locales (si las hay)\n  const mergedReviews = (() => {\n    if (!product) return [];\n    const pid = product._id || product.id || product.slug;\n    const key = `product_reviews_${pid}`;\n    let locals = [];\n    try {\n      const saved = localStorage.getItem(key);\n      locals = saved ? JSON.parse(saved) : [];\n    } catch {}\n    // Las del backend vienen con shape { userId: { name, avatar }, rating, comment, createdAt }\n    return [...locals, ...productReviews];\n  })();\n  if (!product) {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"product-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-not-found\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Producto no encontrado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"El producto que buscas no existe o ha sido removido.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/shop\",\n          className: \"btn-back-shop\",\n          children: \"Volver a la tienda\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this);\n  }\n  const img = firstImg(product);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"product-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"breadcrumb\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Inicio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/shop\",\n        children: \"Tienda\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"current\",\n        children: product.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-image-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-image-main\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"product-image-sim large\",\n            src: img ? resolveImgUrl(img) : noImage,\n            alt: product.title,\n            onError: e => {\n              e.currentTarget.src = noImage;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-info-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-category\",\n          children: catLabel(product.category)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"product-title\",\n          children: product.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-rating\",\n          children: [renderStars(averageRating), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rating-text\",\n            children: [averageRating > 0 ? averageRating.toFixed(1) : \"Sin calificar\", product.reviewsCount ? ` (${product.reviewsCount} reseñas)` : \"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-price-main\",\n          children: fmtCRC(product.price)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-description\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Descripci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: product.description || \"Sin descripción\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-purchase\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Cantidad:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"quantity-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setQuantity(Math.max(1, quantity - 1)),\n                className: \"quantity-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-minus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"quantity-display\",\n                children: quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setQuantity(quantity + 1),\n                className: \"quantity-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-plus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"purchase-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `btn-add-to-cart ${addedToCart ? \"added\" : \"\"}`,\n              onClick: handleAddToCart,\n              disabled: product.stock <= 0,\n              children: addedToCart ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-check\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 41\n                }, this), \" \\xA1Agregado!\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-shopping-cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 41\n                }, this), \" Agregar al carrito\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-buy-now\",\n              disabled: product.stock <= 0,\n              onClick: () => {\n                handleAddToCart();\n                setTimeout(() => navigate(\"/cart\"), 400);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-bolt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 33\n              }, this), \" Comprar ahora\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 25\n          }, this), user && user.userType === \"buyer\" && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-review-product\",\n            onClick: () => setShowReviewForm(true),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-star\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 33\n            }, this), \" Evaluar Producto\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-features\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feature\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-truck\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Env\\xEDo a todo Costa Rica\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feature\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-shield-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Garant\\xEDa de calidad artesanal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"feature\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-heart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Hecho con amor por artesanos locales\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }, this), sellerInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"seller-info-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFEA Informaci\\xF3n del Vendedor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seller-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seller-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seller-avatar\",\n            children: sellerInfo.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: sellerInfo.avatar,\n              alt: sellerInfo.businessName || sellerInfo.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seller-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: sellerInfo.businessName || sellerInfo.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 33\n            }, this), sellerInfo.role && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"seller-category\",\n              children: String(sellerInfo.role).toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seller-actions\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/seller-profile/${sellerInfo.id || product.vendorId}`,\n            className: \"btn-view-store\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-eye\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 33\n            }, this), \" Ver Tienda Completa\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-reviews-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u2B50 Rese\\xF1as del Producto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 17\n      }, this), mergedReviews.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviews-list\",\n        children: mergedReviews.slice(0, 10).map(review => {\n          var _review$userId, _review$userId2, _review$userId3;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reviewer-info\",\n                children: [(_review$userId = review.userId) !== null && _review$userId !== void 0 && _review$userId.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: review.userId.avatar,\n                  alt: (_review$userId2 = review.userId) === null || _review$userId2 === void 0 ? void 0 : _review$userId2.name,\n                  className: \"review-avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-user-circle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: ((_review$userId3 = review.userId) === null || _review$userId3 === void 0 ? void 0 : _review$userId3.name) || review.userName || \"Usuario\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-rating\",\n                children: renderStars(review.rating || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-date\",\n              children: new Date(review.createdAt || review.date).toLocaleDateString(\"es-CR\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 33\n            }, this), review.comment && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-comment\",\n              children: review.comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 52\n            }, this)]\n          }, review._id || review.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-reviews\",\n        children: \"A\\xFAn no hay rese\\xF1as para este producto.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navigation-actions\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/shop\",\n        className: \"btn-back\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-arrow-left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 21\n        }, this), \" Volver a la tienda\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 13\n    }, this), showReviewForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setShowReviewForm(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Evaluar Producto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowReviewForm(false),\n            className: \"modal-close\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-times\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rating-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Calificaci\\xF3n del producto:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 33\n            }, this), renderStars(userRating, true, setUserRating)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comment-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Comentario (opcional):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: reviewComment,\n              onChange: e => setReviewComment(e.target.value),\n              placeholder: \"Contanos tu experiencia\\u2026\",\n              rows: 4\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowReviewForm(false),\n            className: \"btn-cancel\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSubmitReview,\n            className: \"btn-submit\",\n            disabled: userRating === 0,\n            children: \"Enviar Rese\\xF1a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 9\n  }, this);\n};\n_s(ProductPage, \"Uohp2P//XDHrWIVppFCGgAOewKo=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = ProductPage;\nexport default ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","useAuth","ShopAPI","resolveImgUrl","noImage","jsxDEV","_jsxDEV","Fragment","_Fragment","fmtCRC","n","toLocaleString","catLabel","c","map","jewelery","art","ceramics","textiles","decoration","bags","wood","toUpperCase","slice","firstImg","p","arr","Array","isArray","images","candidate","find","Boolean","String","replace","ProductPage","_s","params","slugOrId","slug","id","navigate","user","product","setProduct","sellerInfo","setSellerInfo","quantity","setQuantity","addedToCart","setAddedToCart","productReviews","setProductReviews","averageRating","setAverageRating","userRating","setUserRating","reviewComment","setReviewComment","showReviewForm","setShowReviewForm","load","_resDetail$data","resDetail","get","detail","data","vendorId","_id","businessName","companyName","name","role","avatar","pid","_resReviews$data","resReviews","reviews","page","limit","list","sum","reduce","acc","rv","rating","length","err","_err$response","console","error","response","message","handleAddToCart","savedCart","localStorage","getItem","cart","JSON","parse","cartId","existing","it","img","push","productId","title","price","image","category","stock","setItem","stringify","setTimeout","handleSubmitReview","newReview","Date","now","userId","comment","createdAt","toISOString","_local","key","existingLocal","localArr","updated","alert","renderStars","interactive","onStarClick","className","children","star","Math","round","onClick","undefined","fileName","_jsxFileName","lineNumber","columnNumber","mergedReviews","locals","saved","to","src","alt","onError","e","currentTarget","toFixed","reviewsCount","description","max","disabled","userType","review","_review$userId","_review$userId2","_review$userId3","userName","date","toLocaleDateString","stopPropagation","value","onChange","target","placeholder","rows","_c","$RefreshReg$"],"sources":["C:/Users/jospa/OneDrive/Desktop/artesjac-test2/artesjac-test2/src/pages/ProductPage.js"],"sourcesContent":["// src/pages/ProductPage.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../modules/auth/AuthContext\";\r\nimport { ShopAPI } from \"../api/shop.service\";\r\nimport { resolveImgUrl } from \"../utils/resolveImgUrl\";\r\nimport noImage from \"../assets/images/noimage.png\";\r\nimport \"../styles/product.css\";\r\n\r\n// Formateo de colones CR\r\nconst fmtCRC = (n) =>\r\n    typeof n === \"number\" ? `₡${n.toLocaleString(\"es-CR\")}` : n;\r\n\r\n// Traducción simple de categorías (si en DB están en inglés)\r\nconst catLabel = (c) => {\r\n    const map = {\r\n        jewelery: \"Joyería\",\r\n        art: \"Pintura\",\r\n        ceramics: \"Cerámica\",\r\n        textiles: \"Textil\",\r\n        decoration: \"Decoración\",\r\n        bags: \"Bolsos\",\r\n        wood: \"Madera\",\r\n    };\r\n    return map[c] || (c ? c[0].toUpperCase() + c.slice(1) : \"General\");\r\n};\r\n\r\n// Saca la primera imagen válida del arreglo\r\nconst firstImg = (p) => {\r\n    const arr = Array.isArray(p?.images) ? p.images : [];\r\n    const candidate = arr.find(Boolean);\r\n    return candidate ? String(candidate).replace(/\\\\/g, \"/\") : null;\r\n};\r\n\r\nexport const ProductPage = () => {\r\n    // Soporta ruta /p/:slug o /product/:id (cualquiera de los dos)\r\n    const params = useParams();\r\n    const slugOrId = params.slug || params.id;\r\n\r\n    const navigate = useNavigate();\r\n    const { user } = useAuth();\r\n\r\n    const [product, setProduct] = useState(null);\r\n    const [sellerInfo, setSellerInfo] = useState(null);\r\n\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [addedToCart, setAddedToCart] = useState(false);\r\n\r\n    const [productReviews, setProductReviews] = useState([]);\r\n    const [averageRating, setAverageRating] = useState(0);\r\n\r\n    const [userRating, setUserRating] = useState(0);\r\n    const [reviewComment, setReviewComment] = useState(\"\");\r\n    const [showReviewForm, setShowReviewForm] = useState(false);\r\n\r\n    // Cargar detalle + reseñas reales (públicas)\r\n    const load = async () => {\r\n        try {\r\n            // Detalle por slugOrId (axios-like: res.data => { ok, data })\r\n            const resDetail = await ShopAPI.get(slugOrId);\r\n            const detail = resDetail?.data?.data;\r\n            if (!detail) {\r\n                setProduct(null);\r\n                return;\r\n            }\r\n            setProduct(detail);\r\n\r\n            // Vendedor público embebido\r\n            if (detail.vendorId) {\r\n                setSellerInfo({\r\n                    id: detail.vendorId._id || detail.vendorId.id,\r\n                    businessName: detail.vendorId.companyName || detail.vendorId.name,\r\n                    name: detail.vendorId.name,\r\n                    role: detail.vendorId.role,\r\n                    avatar: detail.vendorId.avatar,\r\n                });\r\n            } else {\r\n                setSellerInfo(null);\r\n            }\r\n\r\n            // Rating agregado desde el mismo detalle (si backend lo manda)\r\n            if (typeof detail.averageRating === \"number\") {\r\n                setAverageRating(detail.averageRating);\r\n            } else {\r\n                setAverageRating(0);\r\n            }\r\n\r\n            // Reseñas aprobadas públicas\r\n            const pid = detail._id || detail.id;\r\n            if (pid) {\r\n                const resReviews = await ShopAPI.reviews(pid, { page: 1, limit: 10 });\r\n                const list = resReviews?.data?.data || [];\r\n                setProductReviews(list);\r\n\r\n                // Si el detalle no trae average, calcularlo localmente\r\n                if (typeof detail.averageRating !== \"number\") {\r\n                    const sum = list.reduce((acc, rv) => acc + (rv.rating || 0), 0);\r\n                    setAverageRating(list.length ? sum / list.length : 0);\r\n                }\r\n            } else {\r\n                setProductReviews([]);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Product detail error:\", err?.response?.data || err.message);\r\n            setProduct(null);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        load();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [slugOrId]);\r\n\r\n    // Agregar al carrito (compatibilidad: guarda id, name, etc.)\r\n    const handleAddToCart = () => {\r\n        if (!product) return;\r\n\r\n        try {\r\n            const savedCart = localStorage.getItem(\"artesjac-cart\");\r\n            let cart = savedCart ? JSON.parse(savedCart) : [];\r\n\r\n            const cartId = product._id || product.id;\r\n            const existing = cart.find((it) => it.id === cartId);\r\n\r\n            const img = firstImg(product);\r\n\r\n            if (existing) {\r\n                cart = cart.map((it) =>\r\n                    it.id === cartId ? { ...it, quantity: (it.quantity || 1) + quantity } : it\r\n                );\r\n            } else {\r\n                cart.push({\r\n                    id: cartId, // compatibilidad con lógicas previas\r\n                    productId: cartId,\r\n                    slug: product.slug,\r\n                    name: product.title, // compatibilidad con UIs que esperan \"name\"\r\n                    title: product.title,\r\n                    price: product.price,\r\n                    quantity,\r\n                    image: img,\r\n                    category: product.category,\r\n                    stock: product.stock,\r\n                });\r\n            }\r\n\r\n            localStorage.setItem(\"artesjac-cart\", JSON.stringify(cart));\r\n            setAddedToCart(true);\r\n            setTimeout(() => setAddedToCart(false), 2500);\r\n        } catch (error) {\r\n            console.error(\"Error al agregar al carrito:\", error);\r\n        }\r\n    };\r\n\r\n    // En esta versión seguimos usando localStorage para enviar reseñas (no hay POST público aún)\r\n    const handleSubmitReview = () => {\r\n        if (!user || userRating === 0 || !product) return;\r\n\r\n        const newReview = {\r\n            _id: `local_${Date.now()}`,\r\n            userId: { name: user.name || \"Usuario\" }, // para calzar con el shape público\r\n            rating: userRating,\r\n            comment: reviewComment,\r\n            createdAt: new Date().toISOString(),\r\n            _local: true, // flag local\r\n        };\r\n\r\n        try {\r\n            const pid = product._id || product.id || product.slug;\r\n            const key = `product_reviews_${pid}`;\r\n            const existingLocal = localStorage.getItem(key);\r\n            const localArr = existingLocal ? JSON.parse(existingLocal) : [];\r\n\r\n            const updated = [newReview, ...productReviews, ...localArr];\r\n            localStorage.setItem(key, JSON.stringify(updated));\r\n            setProductReviews(updated);\r\n\r\n            // Recalcular promedio (local)\r\n            const sum = updated.reduce((acc, rv) => acc + (rv.rating || 0), 0);\r\n            setAverageRating(updated.length ? sum / updated.length : 0);\r\n\r\n            setUserRating(0);\r\n            setReviewComment(\"\");\r\n            setShowReviewForm(false);\r\n            alert(\"¡Reseña enviada! (local)\");\r\n        } catch (error) {\r\n            console.error(\"Error al guardar reseña:\", error);\r\n            alert(\"Error al enviar la reseña\");\r\n        }\r\n    };\r\n\r\n    const renderStars = (rating, interactive = false, onStarClick = null) => (\r\n        <div className={`stars ${interactive ? \"interactive\" : \"\"}`}>\r\n            {[1, 2, 3, 4, 5].map((star) => (\r\n                <i\r\n                    key={star}\r\n                    className={`fa fa-star ${star <= Math.round(rating) ? \"active\" : \"\"}`}\r\n                    onClick={interactive ? () => onStarClick(star) : undefined}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    // Fusión reseñas de API + locales (si las hay)\r\n    const mergedReviews = (() => {\r\n        if (!product) return [];\r\n        const pid = product._id || product.id || product.slug;\r\n        const key = `product_reviews_${pid}`;\r\n        let locals = [];\r\n        try {\r\n            const saved = localStorage.getItem(key);\r\n            locals = saved ? JSON.parse(saved) : [];\r\n        } catch { }\r\n        // Las del backend vienen con shape { userId: { name, avatar }, rating, comment, createdAt }\r\n        return [...locals, ...productReviews];\r\n    })();\r\n\r\n    if (!product) {\r\n        return (\r\n            <main className=\"product-container\">\r\n                <div className=\"product-not-found\">\r\n                    <h2>Producto no encontrado</h2>\r\n                    <p>El producto que buscas no existe o ha sido removido.</p>\r\n                    <Link to=\"/shop\" className=\"btn-back-shop\">\r\n                        Volver a la tienda\r\n                    </Link>\r\n                </div>\r\n            </main>\r\n        );\r\n    }\r\n\r\n    const img = firstImg(product);\r\n\r\n    return (\r\n        <main className=\"product-container\">\r\n            {/* Breadcrumb */}\r\n            <nav className=\"breadcrumb\">\r\n                <Link to=\"/\">Inicio</Link>\r\n                <span>/</span>\r\n                <Link to=\"/shop\">Tienda</Link>\r\n                <span>/</span>\r\n                <span className=\"current\">{product.title}</span>\r\n            </nav>\r\n\r\n            <div className=\"product-detail\">\r\n                {/* Imagen del producto */}\r\n                <div className=\"product-image-section\">\r\n                    <div className=\"product-image-main\">\r\n                        <img\r\n                            className=\"product-image-sim large\"\r\n                            src={img ? resolveImgUrl(img) : noImage}\r\n                            alt={product.title}\r\n                            onError={(e) => {\r\n                                e.currentTarget.src = noImage;\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Información del producto */}\r\n                <div className=\"product-info-section\">\r\n                    <div className=\"product-category\">{catLabel(product.category)}</div>\r\n\r\n                    <h1 className=\"product-title\">{product.title}</h1>\r\n\r\n                    {/* Rating del producto */}\r\n                    <div className=\"product-rating\">\r\n                        {renderStars(averageRating)}\r\n                        <span className=\"rating-text\">\r\n                            {averageRating > 0 ? averageRating.toFixed(1) : \"Sin calificar\"}\r\n                            {product.reviewsCount ? ` (${product.reviewsCount} reseñas)` : \"\"}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div className=\"product-price-main\">{fmtCRC(product.price)}</div>\r\n\r\n                    <div className=\"product-description\">\r\n                        <h3>Descripción</h3>\r\n                        <p>{product.description || \"Sin descripción\"}</p>\r\n                    </div>\r\n\r\n                    <div className=\"product-purchase\">\r\n                        <div className=\"quantity-section\">\r\n                            <label>Cantidad:</label>\r\n                            <div className=\"quantity-controls\">\r\n                                <button\r\n                                    onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                                    className=\"quantity-btn\"\r\n                                >\r\n                                    <i className=\"fa fa-minus\" />\r\n                                </button>\r\n                                <span className=\"quantity-display\">{quantity}</span>\r\n                                <button\r\n                                    onClick={() => setQuantity(quantity + 1)}\r\n                                    className=\"quantity-btn\"\r\n                                >\r\n                                    <i className=\"fa fa-plus\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"purchase-actions\">\r\n                            <button\r\n                                className={`btn-add-to-cart ${addedToCart ? \"added\" : \"\"}`}\r\n                                onClick={handleAddToCart}\r\n                                disabled={product.stock <= 0}\r\n                            >\r\n                                {addedToCart ? (\r\n                                    <>\r\n                                        <i className=\"fa fa-check\" /> ¡Agregado!\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <i className=\"fa fa-shopping-cart\" /> Agregar al carrito\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n\r\n                            <button\r\n                                className=\"btn-buy-now\"\r\n                                disabled={product.stock <= 0}\r\n                                onClick={() => {\r\n                                    handleAddToCart();\r\n                                    setTimeout(() => navigate(\"/cart\"), 400);\r\n                                }}\r\n                            >\r\n                                <i className=\"fa fa-bolt\" /> Comprar ahora\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Botón para evaluar producto */}\r\n                        {user && user.userType === \"buyer\" && (\r\n                            <button\r\n                                className=\"btn-review-product\"\r\n                                onClick={() => setShowReviewForm(true)}\r\n                            >\r\n                                <i className=\"fa fa-star\" /> Evaluar Producto\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"product-features\">\r\n                        <div className=\"feature\">\r\n                            <i className=\"fa fa-truck\" />\r\n                            <span>Envío a todo Costa Rica</span>\r\n                        </div>\r\n                        <div className=\"feature\">\r\n                            <i className=\"fa fa-shield-alt\" />\r\n                            <span>Garantía de calidad artesanal</span>\r\n                        </div>\r\n                        <div className=\"feature\">\r\n                            <i className=\"fa fa-heart\" />\r\n                            <span>Hecho con amor por artesanos locales</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Información del Vendedor */}\r\n            {sellerInfo && (\r\n                <div className=\"seller-info-section\">\r\n                    <h2>🏪 Información del Vendedor</h2>\r\n                    <div className=\"seller-card\">\r\n                        <div className=\"seller-header\">\r\n                            <div className=\"seller-avatar\">\r\n                                {sellerInfo.avatar ? (\r\n                                    <img src={sellerInfo.avatar} alt={sellerInfo.businessName || sellerInfo.name} />\r\n                                ) : (\r\n                                    <i className=\"fa fa-store\" />\r\n                                )}\r\n                            </div>\r\n                            <div className=\"seller-details\">\r\n                                <h3>{sellerInfo.businessName || sellerInfo.name}</h3>\r\n                                {sellerInfo.role && (\r\n                                    <p className=\"seller-category\">{String(sellerInfo.role).toUpperCase()}</p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"seller-actions\">\r\n                            {/* Ajustá esta ruta si tenés perfil público del vendedor */}\r\n                            <Link to={`/seller-profile/${sellerInfo.id || product.vendorId}`} className=\"btn-view-store\">\r\n                                <i className=\"fa fa-eye\" /> Ver Tienda Completa\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Reseñas del Producto */}\r\n            <div className=\"product-reviews-section\">\r\n                <h2>⭐ Reseñas del Producto</h2>\r\n                {mergedReviews.length > 0 ? (\r\n                    <div className=\"reviews-list\">\r\n                        {mergedReviews.slice(0, 10).map((review) => (\r\n                            <div key={review._id || review.id} className=\"review-item\">\r\n                                <div className=\"review-header\">\r\n                                    <div className=\"reviewer-info\">\r\n                                        {review.userId?.avatar ? (\r\n                                            <img src={review.userId.avatar} alt={review.userId?.name} className=\"review-avatar\" />\r\n                                        ) : (\r\n                                            <i className=\"fa fa-user-circle\" />\r\n                                        )}\r\n                                        <span>{review.userId?.name || review.userName || \"Usuario\"}</span>\r\n                                    </div>\r\n                                    <div className=\"review-rating\">{renderStars(review.rating || 0)}</div>\r\n                                </div>\r\n                                <div className=\"review-date\">\r\n                                    {new Date(review.createdAt || review.date).toLocaleDateString(\"es-CR\")}\r\n                                </div>\r\n                                {review.comment && <div className=\"review-comment\">{review.comment}</div>}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <p className=\"no-reviews\">Aún no hay reseñas para este producto.</p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Botón de regreso */}\r\n            <div className=\"navigation-actions\">\r\n                <Link to=\"/shop\" className=\"btn-back\">\r\n                    <i className=\"fa fa-arrow-left\" /> Volver a la tienda\r\n                </Link>\r\n            </div>\r\n\r\n            {/* Modal para evaluar producto (local, sin POST aún) */}\r\n            {showReviewForm && (\r\n                <div className=\"modal-overlay\" onClick={() => setShowReviewForm(false)}>\r\n                    <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n                        <div className=\"modal-header\">\r\n                            <h2>Evaluar Producto</h2>\r\n                            <button onClick={() => setShowReviewForm(false)} className=\"modal-close\">\r\n                                <i className=\"fa fa-times\" />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"rating-section\">\r\n                                <label>Calificación del producto:</label>\r\n                                {renderStars(userRating, true, setUserRating)}\r\n                            </div>\r\n                            <div className=\"comment-section\">\r\n                                <label>Comentario (opcional):</label>\r\n                                <textarea\r\n                                    value={reviewComment}\r\n                                    onChange={(e) => setReviewComment(e.target.value)}\r\n                                    placeholder=\"Contanos tu experiencia…\"\r\n                                    rows={4}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button onClick={() => setShowReviewForm(false)} className=\"btn-cancel\">\r\n                                Cancelar\r\n                            </button>\r\n                            <button onClick={handleSubmitReview} className=\"btn-submit\" disabled={userRating === 0}>\r\n                                Enviar Reseña\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default ProductPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}